^TerranAddon:
	Inherits: ^Building
	Inherits@2: ^TerranBuilding
	Inherits@POWER_OUTAGE: ^DisableOnLowPowerOrPowerDown
	ProximityExternalCondition@space:
		Condition: occupying_space
		Range: 1c512
	-ProximityExternalCondition@addons:
	Selectable:
		Bounds: 1920, 1280
	HitShape:
		UseTargetableCellsOffsets: true
		Type: Rectangle
			TopLeft: -1024, -512
			BottomRight: 1024, 512
	-Buildable:
	MustBeDestroyed:
		RequiredForShortGame: false
	OwnerLostAction:
		Action: ChangeOwner
	Tooltip:
		Name: X with attached Y
		RequiresCondition: !in_world
	Tooltip@in_world:
		Name: X
		RequiresCondition: in_world
	Building:
		Footprint: xx
		Dimensions: 2,1
		LocalCenterOffset: 0,-512,0
	Health:
		HP: 80000
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 4c0
		RequiresCondition: !disabled
	WithDeathAnimation:
		DeathSequence: dead
		UseDeathTypeSuffix: false
	WithIdleOverlay@fire1:
		Offset: 0,-650,0
	WithIdleOverlay@fire2:
		Offset: 0,512,320
	WithIdleOverlay@fire3:
		Offset: 0,0,256
	KillsSelf:
		RequiresCondition: botowner && !cc_addon #remove for bots to free up space in their base
		Delay: 750
	GrantCondition@realactor:
		Condition: in_world

TCOMSAT.plug:
	Inherits: ^BuildingPlug
	Valued:
		Cost: 1500
	Tooltip:
		Name: Addon: ComSat Station
	Buildable:
		Queue: Tech
		BuildPaletteOrder: 199
		Prerequisites: refinery, tcommand.addon, ~structures.terran, ~techlevel.medium
		Description: Attach to Command Center. Provides an overview of the battlefield.\nRequires power to operate.
		IconPalette: player
		IconPaletteIsPlayerPalette: true
	Plug:
		Type: tcomsat.plug
	RenderSprites:
		Image: tcomsat
	SequencePlaceBuildingPreview:
		Sequence: idle
	Power:
		Amount: -50

# this is to prevent the AI from building a 2nd comsat, because they don't need that
TCOMSAT.plugai:
	Inherits: TCOMSAT.plug
	Buildable:
		Queue: Bot
		Prerequisites: refinery, tcommand.addon, ~structures.terran, ~techlevel.medium, ~ai.all, ~!tcomsat

TCOMSAT:
	Inherits: ^TerranAddon
	Valued:
		Cost: 1500
	Tooltip:
		Name: Command Centre with attached ComSat Station
		RequiresCondition: !in_world
	Tooltip@in_world:
		Name: ComSat Station
		RequiresCondition: in_world
	ProvidesPrerequisite@buildingname:
		RequiresCondition: cc_addon
	ProvidesPrerequisite@radar:
		RequiresCondition: cc_addon
		Prerequisite: radar
	RevealsShroud:
		MinRange: 6c0
		Range: 10c0
		RevealGeneratedShroud: False
	RevealsShroud@GAPGEN:
		Range: 6c0
		RequiresCondition: !disabled
	Power:
		Amount: -50
		RequiresCondition: cc_addon
	WithIdleOverlay:
		Palette: player
		IsPlayerPalette: true
		RequiresCondition: !build-incomplete
		PauseOnCondition: disabled
	ExternalCondition@nearcc:
		Condition: cc_addon
	GrantCondition@nearcc:
		RequiresCondition: !cc_addon
		Condition: disabled
	SupportPowerChargeBar:
	SpawnActorPower@spyvan:
		PauseOnCondition: lowpower || powerdown
		RequiresCondition: cc_addon
		OrderName: VanSweep
		Cursor: chrono-target
		Icon: spy
		ChargeInterval: 3000
		LifeTime: 200
		Name: Scanner Sweep
		Description: Reveal an area on the map for 5 seconds. \nReveals cloaked units.
		Actor: camera.spyplane
		SelectTargetSpeechNotification: SelectTarget
		DisplayRadarPing: True
		DeploySound: tcssca00.aud
		EffectSequence: idle
		AllowMultiple: true
	ProximityExternalCondition@iexist:
		Condition: cc_addon_exists
		Range: 4c0
	Sellable:
		RequiresCondition: !build-incomplete && !being-captured && !being-demolished && cc_addon
	ProvidesRadar:
		RequiresCondition: !jammed && !disabled

TSHOP.plug:
	Inherits: ^BuildingPlug
	Valued:
		Cost: 1000
	Tooltip:
		Name: Addon: Machine Shop
	Buildable:
		Queue: Vehicle
		BuildPaletteOrder: 115
		Prerequisites: ~factory, tfactory.addon, ~structures.terran, ~techlevel.medium
		Description: Attach to Factory. \nAllows access to Siege Tank,\n Goliath and vehicle upgrades.
		IconPalette: player
		IconPaletteIsPlayerPalette: true
	Plug:
		Type: tshop.plug
	RenderSprites:
		Image: tshop
	SequencePlaceBuildingPreview:
		Sequence: idle
	Power:
		Amount: -50

TSHOP.plugai:
	Inherits: TSHOP.plug
	Buildable:
		Queue: Bot
		Prerequisites: factory, tfactory.addon, ~structures.terran, ~techlevel.medium, ~ai.all, ~!tshop

TSHOP:
	Inherits: ^TerranAddon
	Valued:
		Cost: 1000
	Tooltip:
		Name: Factory with attached Machine Shop
	Tooltip@in_world:
		Name: Machine Shop
	ProvidesPrerequisite@buildingname:
		RequiresCondition: fac_addon
	RevealsShroud:
		Range: 4c0
	Power:
		Amount: -50
		RequiresCondition: fac_addon
	WithSpriteBody:
		PauseOnCondition: disabled
	ExternalCondition@nearcc:
		Condition: fac_addon
	GrantCondition@nearcc:
		RequiresCondition: !fac_addon
		Condition: disabled
	ProximityExternalCondition@iexist:
		Condition: fac_addon_exists
		Range: 3c0
	Sellable:
		RequiresCondition: !build-incomplete && !being-captured && !being-demolished && fac_addon
	KillsSelf:
		RequiresCondition: botowner && !fac_addon

TCTRL.plug:
	Inherits: ^BuildingPlug
	Valued:
		Cost: 1000
	Tooltip:
		Name: Addon: Control Tower
	Buildable:
		Queue: Aircraft
		BuildPaletteOrder: 200
		Prerequisites: ~tsport, ~tsport.addon, ~structures.terran, ~techlevel.high
		Description: Attach to Starport. \nAllows production of Dropship and aircraft upgrades. \nSupport Power: Orbital Drop
		IconPalette: player
		IconPaletteIsPlayerPalette: true
	Plug:
		Type: tctrl.plug
	RenderSprites:
		Image: tctrl
	SequencePlaceBuildingPreview:
		Sequence: idle
	Power:
		Amount: -50

TCTRL.plugai:
	Inherits: TCTRL.plug
	Buildable:
		Queue: Bot
		Prerequisites: ~tsport, tsport.addon, ~structures.terran, ~techlevel.high, ~ai.all, ~!tctrl

TCTRL:
	Inherits: ^TerranAddon
	Valued:
		Cost: 1000
	Tooltip:
		Name: Starport with attached Control Tower
	Tooltip@in_world:
		Name: Control Tower
	ProvidesPrerequisite@buildingname:
		RequiresCondition: star_addon
	RevealsShroud:
		Range: 4c0
	Power:
		Amount: -50
		RequiresCondition: star_addon
	WithSpriteBody:
		PauseOnCondition: disabled
	ExternalCondition@nearcc:
		Condition: star_addon
	GrantCondition@nearcc:
		RequiresCondition: !star_addon
		Condition: disabled
	ProximityExternalCondition@iexist:
		Condition: star_addon_exists
		Range: 3c0
	Sellable:
		RequiresCondition: !build-incomplete && !being-captured && !being-demolished && star_addon
	SupportPowerChargeBar:
	DropPodsPower:
		OrderName: OrbitalDrop
		Cursor: chrono-target
		PauseOnCondition: disabled
		RequiresCondition: star_addon
		Icon: orbitaldrop
		Name: Orbital Drop
		Description: Orbital drop reinforcements.\nA Terran Barracks drops to target location\n along with some marines.\n\nLasts 1 minute.
		SelectTargetSpeechNotification: SelectTarget
		SelectTargetTextNotification: Select target.
		DisplayRadarPing: true
		ChargeInterval: 9000
		UnitTypes: TBARR.drop
		Drops: 1,1
		PodScatter: 1
		PodFacing: 704
		EntryEffect: explosion
		EntryEffectSequence: ionring
		CameraActor: camera
		Weapon: TerranGoliath2
		WeaponDelay: 5
	KillsSelf:
		RequiresCondition: botowner && !star_addon

TCOPS.plug:
	Inherits: ^BuildingPlug
	Valued:
		Cost: 1000
	Tooltip:
		Name: Addon: Covert Ops
	Buildable:
		Queue: Tech
		BuildPaletteOrder: 200
		Prerequisites: ~tscience, tscience.addon, ~structures.terran, ~techlevel.unrestricted
		Description: Attach to Science Facility. \nAllows access to Ghost and \n missile silo.
		IconPalette: player
		IconPaletteIsPlayerPalette: true
	Plug:
		Type: tcops.plug
	RenderSprites:
		Image: tcops
	SequencePlaceBuildingPreview:
		Sequence: idle
	Power:
		Amount: -100

TCOPS.plugai:
	Inherits: TCOPS.plug
	Buildable:
		Queue: Bot
		Prerequisites: ~tscience, ~tscience.addon, ~structures.terran, ~techlevel.unrestricted, ~ai.all, ~!tcops

TCOPS:
	Inherits: ^TerranAddon
	Valued:
		Cost: 1000
	Tooltip:
		Name: Science Facility with attached Covert Ops
	Tooltip@in_world:
		Name: Covert Ops
	ProvidesPrerequisite@buildingname:
		RequiresCondition: scf_addon
	RevealsShroud:
		Range: 4c0
	Power:
		Amount: -100
		RequiresCondition: scf_addon
	WithSpriteBody:
		PauseOnCondition: disabled
	WithIdleOverlay:
		Palette: player
		IsPlayerPalette: true
		RequiresCondition: !build-incomplete
		PauseOnCondition: disabled
	ExternalCondition@nearcc:
		Condition: scf_addon
	GrantCondition@nearcc:
		RequiresCondition: !scf_addon
		Condition: disabled
	ProximityExternalCondition@iexist:
		Condition: scf_addon_exists
		Range: 3c0
	Sellable:
		RequiresCondition: !build-incomplete && !being-captured && !being-demolished && scf_addon
	KillsSelf:
		RequiresCondition: botowner && !scf_addon

TPLAB.plug:
	Inherits: ^BuildingPlug
	Valued:
		Cost: 1000
	Tooltip:
		Name: Addon: Physics Lab
	Buildable:
		Queue: Tech
		BuildPaletteOrder: 201
		Prerequisites: ~tscience, tscience.addon, ~structures.terran, ~techlevel.unrestricted
		Description: Attach to Science Facility. \nAllows access to Battlecruiser.
		IconPalette: player
		IconPaletteIsPlayerPalette: true
	Plug:
		Type: tplab.plug
	RenderSprites:
		Image: tplab
	SequencePlaceBuildingPreview:
		Sequence: idle
	Power:
		Amount: -100

TPLAB.plugai:
	Inherits: TPLAB.plug
	Buildable:
		Queue: Bot
		Prerequisites: ~tscience, ~tscience.addon, ~structures.terran, ~techlevel.unrestricted, ~ai.all, ~!tplab

TPLAB:
	Inherits: TCOPS
	Tooltip:
		Name: Science Facility with attached Physics Lab
	Tooltip@in_world:
		Name: Physics Lab
	ProvidesPrerequisite@buildingname:
		RequiresCondition: scf_addon
	-WithIdleOverlay:


TSILO.plug:
	Inherits: ^BuildingPlug
	Valued:
		Cost: 2000
	Tooltip:
		Name: Addon: Missile Silo
	Buildable:
		Queue: Tech
		BuildPaletteOrder: 202
		Prerequisites: tcops, ~tcommand.addon, ~structures.terran, ~techlevel.unrestricted, ~!tsilo
		Description: Attach to Command Center. \nAllows production of a nuclear missile.\nRequires power to operate.
		IconPalette: player
		IconPaletteIsPlayerPalette: true
	Plug:
		Type: tsilo.plug
	RenderSprites:
		Image: tsilo
	SequencePlaceBuildingPreview:
		Sequence: idle
	Power:
		Amount: -200

TSILO:
	Inherits: ^TerranAddon
	Valued:
		Cost: 2000
	Tooltip:
		Name: Command Center with attached Missile Silo
	Tooltip@in_world:
		Name: Missile Silo
	ProvidesPrerequisite@buildingname:
	RevealsShroud@GAPGEN:
		Range: 6c0
		RequiresCondition: !disabled
	Power:
		Amount: -200
		RequiresCondition: cc_addon
	WithProductionOverlay:
	ExternalCondition@nearcc:
		Condition: cc_addon
	GrantCondition@nearcc:
		RequiresCondition: !cc_addon
		Condition: disabled
	SupportPowerChargeBar:
	Explodes:
		Type: CenterPosition
		Weapon: TerranSiloNuke
		EmptyWeapon: TerranSiloNuke
	Exit:
		ProductionTypes: Nuke, Bot
	Production:
		Produces: Nuke
	Production@bot:
		RequiresCondition: botowner
		Produces: Bot
	ProductionBar:
		ProductionType: Nuke
		Color: FF00FF
	ProductionQueue@nuke:
		Type: Nuke
		DisplayOrder: 9
		LowPowerModifier: 300
		ReadyAudio: AbombReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: AbombPrepping
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProximityExternalCondition@iexist:
		Condition: cc_addon_exists
		Range: 4c0
	Sellable:
	AmbientSound@nuke:
		SoundFiles: tnsfir00.aud
		Delay: 0
		Interval: -1
		RequiresCondition: nuke_sound
	GrantConditionOnPrerequisite@nuke:
		Prerequisites: nuke_sound
		Condition: nuke_sound
	KillsSelf:
		RequiresCondition: botowner && !cc_addon
		Delay: 125
	WithDecoration@nuke1:
		Image: pips
		Sequence: pip-empty
		Palette: effect
		Position: BottomLeft
		ValidRelationships: None, Ally, Enemy, Neutral
		RequiresCondition: !has_nuke
	WithDecoration@nuke2:
		Image: pips
		Sequence: pip-red
		Palette: effect
		Position: BottomLeft
		ValidRelationships: None, Ally, Enemy, Neutral
		RequiresCondition: has_nuke
	GrantConditionOnPrerequisite@hasnuke:
		Prerequisites: terran.nuke
		Condition: has_nuke

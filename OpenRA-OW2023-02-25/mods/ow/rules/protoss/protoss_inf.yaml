^ProtossInfShield:
	Inherits: ^ProtossShield
	Chronoshiftable:

PPROBE:
	Inherits: ^Vehicle
	Inherits@selection: ^SelectableEconomicUnit
	Inherits@shield: ^ProtossInfShield
	Buildable:
		Queue: Infantry
		BuildPaletteOrder: 45
		Prerequisites: refinery, ~infantry.protoss, ~techlevel.infonly
		Description: Collects Ore, Gems and Tiberium for processing.\nSpeed: 96\n  Unarmed
	Valued:
		Cost: 550
	Tooltip:
		Name: Probe
		GenericName: Harvester
	Selectable:
		DecorationBounds: 1365, 1365
	Harvester:
		Resources: Ore,Gems,Tiberium,BlueTiberium
		BaleUnloadDelay: 1
		BaleUnloadAmount: 10
		SearchFromProcRadius: 15
		SearchFromHarvesterRadius: 8
		EmptyCondition: no-ore
	Health:
		HP: 20000
	Armor:
		Type: Light
	Mobile:
		Speed: 96
		Locomotor: foot2
		TurnSpeed: 90
	RevealsShroud:
		Range: 4c0
	WithHarvestAnimation:
	WithDockingAnimation:
	GpsDot:
		String: Harvester
	Explodes:
		RequiresCondition: !no-ore
		Weapon: OreExplosion
	WithFacingSpriteBody:
	WithStoresResourcesPipsDecoration:
		Position: BottomLeft
		Margin: 4, 3
		RequiresSelection: true
		PipCount: 4
		ResourceSequences:
			Ore: pip-yellow
			Gems: pip-red
			Tiberium: pip-green
			BlueTiberium: pip-blue
	RepairsBridges:
	CaptureManager:
	Captures:
		CaptureTypes: building
		PlayerExperience: 25
		CaptureDelay: 200
		SabotageThreshold: 50
		SabotageHPRemoval: 60
	Infiltrates:
		Types: Husk
		ValidRelationships: Ally
		EnterCursor: goldwrench
		PlayerExperience: 25
	Captures@husk:
		CaptureTypes: husk
		PlayerExperience: 25
		CaptureDelay: 100
		EnterCursor: goldwrench
		ConsumedByCapture: true
	RenderSprites:
	Hovers:
	Voiced:
		VoiceSet: ProtossRobotVoice
	DockClientManager:
	StoresResources:
		Capacity: 8
		Resources: Ore,Gems,Tiberium,BlueTiberium

PPROBE.ENG:
	Inherits: PZEALOT
	RenderSprites:
		Image: pzealot
	Buildable:
		BuildPaletteOrder: 9000
		Prerequisites: ~infantry.protoss, ~techlevel.infonly, ~ai.all
		Description: Captures stuff for the AI.
		BuildLimit: 1
	CaptureManager:
	GrantConditionOnPrerequisite@GLOBALREUSABLEENGINEER:
		Condition: global-reusable-engineers
		Prerequisites: global-reusable-engineers
	Captures:
		RequiresCondition: !global-reusable-engineers
		CaptureTypes: building
		PlayerExperience: 10
		CaptureDelay: 200
	Captures@REUSABLE:
		RequiresCondition: global-reusable-engineers
		CaptureTypes: building
		PlayerExperience: 10
		CaptureDelay: 375
		ConsumedByCapture: False
		EnterCursor: ability
		EnterBlockedCursor: move-blocked
	AttackWander@roam:
		WanderMoveRadius: 3
		MinMoveDelay: 250
		MaxMoveDelay: 400

PZEALOT:
	Inherits: ^Infantry
	Inherits@shield: ^ProtossInfShield
	Inherits@highHP: ^HighHPInfantry
	Buildable:
		Prerequisites: ~infantry.protoss, ~techlevel.infonly
		Description: Fanatical melee infantry.\nSpeed: 80\n  Strong vs infantry
		Queue: Infantry
		BuildAtProductionType: Soldier
		BuildPaletteOrder: 40
		BuildDuration: 300
	Selectable:
		Bounds: 768, 938, 0, 0
		DecorationBounds: 682, 938, 0, 0
		Class: PZEALOT
	Valued:
		Cost: 400
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	Tooltip:
		Name: Zealot
	Health:
		HP: 25000
	Mobile:
		Speed: 80
	RevealsShroud:
		Range: 4c512
	Passenger:
		Weight: 2
	Armament:
		Weapon: ZealotStab
	WithInfantryBody:
		DefaultAttackSequence: shoot
		IdleSequences: stand
		StandSequences: stand
	AutoTarget:
		InitialStance: AttackAnything
		ScanRadius: 5
	AutoTargetPriority@DEFAULT:
		ValidTargets: GroundActor, Infantry
	Targetable:
		TargetTypes: GroundActor, Infantry, Disguise
	RenderSprites:
	Voiced:
		VoiceSet: ZealotVoice
	WithDeathAnimation:
		UseDeathTypeSuffix: false
		CrushedSequence: die
		CrushedSequencePalette: player
		CrushedPaletteIsPlayerPalette: true
	TakeCover:
		SpeedModifier: 120
		Duration: 100
		DamageTriggers: TriggerProne
	-SpawnActorOnDeath@fire:
	MustBeDestroyed:
	ProximityCaptor:
		Types: Infantry
	AttackFrontal:
		FacingTolerance: 0
	GrantConditionOnPrerequisite@shoes:
		Prerequisites: padun
		Condition: shoes
	SpeedMultiplier@shoes:
		RequiresCondition: shoes
		Modifier: 110

PZEALOT.b:
	Inherits: PZEALOT
	Buildable:
		Prerequisites: ~infantry.protoss, ~techlevel.infonly, ~ai.all
		BuildPaletteOrder: 90000
	RenderSprites:
		Image: pzealot
	Cloneable:
		Types: Infantry
	UpdatesPlayerStatistics:
		OverrideActor: pzealot

PZEALOT.b2:
	Inherits: PZEALOT.b

PTEMPLAR:
	Inherits: ^Infantry
	Inherits@shield: ^ProtossInfShield
	Inherits@autotarget: ^AutoTargetGroundAssaultMove
	Buildable:
		Prerequisites: ~infantry.protoss, advtechcenter, ~techlevel.high
		Description: Psi empowered ranged support.\n Can merge with another into a \n powerful Archon.\nSpeed: 72\n  Strong vs ground units
		Queue: Infantry
		BuildAtProductionType: Soldier
		BuildPaletteOrder: 41
		BuildDuration: 1500
	Selectable:
		Bounds: 950, 950, 0, 0
		DecorationBounds: 1280, 1280, 0, -128
	Valued:
		Cost: 2000
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	Tooltip:
		Name: High Templar
	Health:
		HP: 20000
	DamageMultiplier@shield:
		Modifier: 15
	Mobile:
		Speed: 80
		Locomotor: foot2
		TurnSpeed: 72
	RevealsShroud:
		Range: 5c512
	Passenger:
		Weight: 2
	Armament@main:
		RequiresCondition: !merge
		PauseOnCondition: ammo < 30
		Weapon: TemplarWeather
		AmmoUsage: 30
	Armament@merge:
		RequiresCondition: merge
		Weapon: TemplarMergeWeapon
		TargetRelationships: Ally
		Name: mergeattack
	WithInfantryBody:
		DefaultAttackSequence: shoot
		IdleSequences: stand
		StandSequences: stand
	Targetable:
		TargetTypes: GroundActor, Infantry, Disguise, TemplarMerge
	AutoTargetPriority@DEFAULT:
		RequiresCondition: !stance-attackanything && !assault-move && !merge
	AutoTargetPriority@ATTACKANYTHING:
		RequiresCondition: stance-attackanything || assault-move && !merge
	AttackMove:
		AssaultMoveCondition: assault-move
	AmmoPool:
		Ammo: 30
		AmmoCondition: ammo
	ReloadAmmoPool:
		Delay: 25
	WithAmmoPipsDecoration:
		PipCount: 20
		FullSequence: bar-blue
		EmptySequence: bar-empty
		Position: BottomLeft
	RenderSprites:
	Voiced:
		VoiceSet: ProtossTemplarVoice
	WithDeathAnimation:
		UseDeathTypeSuffix: false
		CrushedSequence: die
		CrushedSequencePalette: player
		CrushedPaletteIsPlayerPalette: true
		RequiresCondition: !kill
	-SpawnActorOnDeath@fire:
	ActorLostNotification:
		RequiresCondition: !kill
	MustBeDestroyed:
	ProximityCaptor:
		Types: Infantry
	AttackFrontal:
		Armaments: primary, mergeattack
		FacingTolerance: 16
	GrantConditionOnDeploy@1:
		DeployedCondition: merge
	GrantConditionOnAttack@1:
		Condition: kill
		ArmamentNames: mergeattack
	ExternalCondition@removeself:
		Condition: removeself
	KillsSelf@merge:
		Delay: 1
		RequiresCondition: kill
		DamageTypes: spawnarchon
	KillsSelf@remove:
		Delay: 1
		RequiresCondition: removeself
		RemoveInstead: true
	SpawnActorOnDeath@merge:
		Actor: PARCHON
		DeathType: spawnarchon
		SkipMakeAnimations: false
	-Cloneable:


# Buildable only for AI as they would not do it properly with Templars
PARCHON:
	Inherits: ^Infantry
	Inherits@shield: ^ProtossInfShield
	Inherits@AUTOTARGET: ^AutoTargetGroundAssaultMove
	Buildable:
		Prerequisites: ~infantry.protoss, ~techlevel.unrestricted, ~ai.all, advtechcenter
		Description: Powerful being of 2 merged High Templar\n The ultimate sacrifice.\nSpeed: 88\n  Strong vs ground units
		Queue: Infantry
		BuildAtProductionType: Soldier
		BuildPaletteOrder: 90000
		BuildLimit: 4
	Selectable:
		Bounds: 1024, 1024
		DecorationBounds: 1877, 1877, 0, 0
	Valued:
		Cost: 4000
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	Tooltip:
		Name: Archon
	Health:
		HP: 25000
	DamageMultiplier@shield:
		Modifier: 2
	Armor:
		Type: Heavy
	Mobile:
		Speed: 88
		Locomotor: foot2
		TurnSpeed: 64
		PauseOnCondition: forming
	RevealsShroud:
		Range: 6c512
	Passenger:
		Weight: 4
	Armament:
		Weapon: ArchonBeam1
		PauseOnCondition: forming
		LocalOffset: 400,0,128
	WithInfantryBody:
		DefaultAttackSequence: shoot2
		IdleSequences: stand
		StandSequences: stand
	AutoTarget:
		ScanRadius: 5
	Targetable:
		TargetTypes: GroundActor, Vehicle, Tank, Cyborg
	Targetable@forming:
		TargetTypes: ProtWarp
		RequiresCondition: forming
	RenderSprites:
	Voiced:
		VoiceSet: ProtossArchonVoice
	-DeathSounds@NORMAL:
	-DeathSounds@BURNED:
	-DeathSounds@ZAPPED:
	WithDeathAnimation:
		UseDeathTypeSuffix: false
		CrushedSequence: die
		CrushedSequencePalette: player
		CrushedPaletteIsPlayerPalette: true
	-SpawnActorOnDeath@fire:
	MustBeDestroyed:
	ProximityCaptor:
		Types: Infantry
	AttackFrontal:
		FacingTolerance: 0
	WithSpriteBody:
		Sequence: body
		Palette: player
		IsPlayerPalette: True
	WithIdleOverlay@1:
		Sequence: atom
		Palette: player
		IsPlayerPalette: True
	WithMakeAnimation:
		Sequence: make3
		Condition: forming
	ChangesHealth@start:
		PercentageStep: -75
		Delay: 250000
		StartIfBelow: 101
		DamageCooldown: 0
	ChangesHealth@forming:
		PercentageStep: 1
		Delay: 5
		StartIfBelow: 101
		DamageCooldown: 0
		RequiresCondition: forming
	VoiceAnnouncement:
		RequiresCondition: !forming
		Voice: Build
	AmbientSound@forming:
		SoundFiles: ptesum00.aud
		RequiresCondition: forming
		Interval: 3000
	Explodes:
		Weapon: E100Cannon
		EmptyWeapon: E100Cannon
	-Crushable:


PDTEMPLAR:
	Inherits: ^Infantry
	Inherits@shield: ^ProtossInfShield
	Inherits@Autotarget: ^AutoTargetGroundAssaultMove
	Buildable:
		Prerequisites: ~infantry.protoss, advtechcenter, ~techlevel.unrestricted
		Description: Stealth assassin.\nSpeed: 96\n  Strong vs ground units
		Queue: Infantry
		BuildAtProductionType: Soldier
		BuildPaletteOrder: 42
		BuildDuration: 1500
	Selectable:
		Bounds: 950, 950, 0, 0
		DecorationBounds: 1100, 1100, 0, -256
	Valued:
		Cost: 1800
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	Tooltip:
		Name: Dark Templar
	Health:
		HP: 30000
	Mobile:
		Speed: 96
		Locomotor: foot2
		TurnSpeed: 64
	RevealsShroud:
		Range: 4c512
	Passenger:
		Weight: 2
	Armament:
		RequiresCondition: !merge
		Weapon: TemplarBlade
	Armament@merge:
		RequiresCondition: merge
		Weapon: DTemplarMergeWeapon
		TargetRelationships: Ally
		Name: mergeattack
	WithInfantryBody:
		DefaultAttackSequence: shoot
		IdleSequences: stand
		StandSequences: stand
	AutoTarget:
		ScanRadius: 5
	Targetable:
		TargetTypes: GroundActor, Infantry, Disguise, DTemplarMerge
	AutoTargetPriority@DEFAULT:
		RequiresCondition: !stance-attackanything && !assault-move && !merge
	AutoTargetPriority@ATTACKANYTHING:
		RequiresCondition: stance-attackanything || assault-move && !merge
	RenderSprites:
	Voiced:
		VoiceSet: ProtossTemplarVoice
	WithDeathAnimation:
		UseDeathTypeSuffix: false
		CrushedSequence: die
		CrushedSequencePalette: player
		CrushedPaletteIsPlayerPalette: true
		RequiresCondition: !kill
	-SpawnActorOnDeath@fire:
	ActorLostNotification:
		RequiresCondition: !kill
	MustBeDestroyed:
	ProximityCaptor:
		Types: Infantry
	AttackFrontal:
		FacingTolerance: 0
	AttackFrontal:
		Armaments: primary, mergeattack
		FacingTolerance: 16
	GrantConditionOnDeploy@1:
		DeployedCondition: merge
	GrantConditionOnAttack@1:
		Condition: kill
		ArmamentNames: mergeattack
	ExternalCondition@removeself:
		Condition: removeself
	KillsSelf@merge:
		Delay: 1
		RequiresCondition: kill
		DamageTypes: spawnarchon
	KillsSelf@remove:
		Delay: 1
		RequiresCondition: removeself
		RemoveInstead: true
	SpawnActorOnDeath@merge:
		Actor: PDARCHON
		DeathType: spawnarchon
		SkipMakeAnimations: false
	-ExternalCondition@stealthgen:
	-Cloak@stealthgen:
	Cloak:
		IsPlayerPalette: true
		InitialDelay: 25
		CloakDelay: 80
		CloakSound: tphclo00.aud
		UncloakSound: tphclo01.aud
		UncloakOn: Demolish
		PauseOnCondition: cloak-force-disabled || disabled
	GrantConditionOnDamageState@UNCLOAK:
		Condition: cloak-force-disabled
		ValidDamageStates: Critical
	-Crushable:
	-Cloneable:

PDARCHON:
	Inherits: ^Infantry
	Inherits@shield: ^ProtossInfShield
	Buildable:
		Prerequisites: ~infantry.protoss, ~techlevel.unrestricted, ~ai.all, advtechcenter
		Description: Powerful being of 2 merged Dark Templar\n The ultimate sacrifice.\nSpeed: 88\n  Mind control ability
		Queue: Infantry
		BuildAtProductionType: Soldier
		BuildPaletteOrder: 90000
		BuildLimit: 2
	Selectable:
		Bounds: 1024, 1024
		DecorationBounds: 1877, 1877, 0, 0
	Valued:
		Cost: 4000
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	Tooltip:
		Name: Dark Archon
	Health:
		HP: 30000
	DamageMultiplier@shield:
		Modifier: 4
	GrantConditionOnHealthPercentage@shield:
		RequiresCondition: external_shield && !emp_shields && !firedweapon
	Armor:
		Type: Heavy
	AutoTarget:
		InitialStance: ReturnFire
	Mobile:
		Speed: 88
		Locomotor: foot2
		TurnSpeed: 64
		PauseOnCondition: forming
	RevealsShroud:
		Range: 6c512
	Passenger:
		Weight: 4
	Armament:
		Weapon: DarkArchonMindControl
		RequiresCondition: !forming
		PauseOnCondition: ammo < 180
		AmmoUsage: 180
	AmmoPool:
		Ammo: 180
		AmmoCondition: ammo
		InitialAmmo: 120
	ReloadAmmoPool:
		Delay: 25
	WithAmmoPipsDecoration:
		PipCount: 24
		FullSequence: bar-blue
		EmptySequence: bar-empty
		Position: BottomLeft
	WithInfantryBody:
		DefaultAttackSequence: shoot2
		IdleSequences: stand
		StandSequences: stand
	Targetable:
		TargetTypes: GroundActor, Vehicle, Tank, Cyborg, DarkArchon
	Targetable@forming:
		TargetTypes: ProtWarp
		RequiresCondition: forming
	GrantConditionOnPrerequisite@botowner:
		Condition: botowner
		Prerequisites: ai.all
	AutoTarget:
		RequiresCondition: botowner
		AttackAnythingCondition: stance-attackanything
	AutoTargetPriority@DEFAULT:
		RequiresCondition: !stance-attackanything && !assault-move && botowner
		ValidTargets: Infantry, Vehicle, Ship, Underwater, AirborneActor, Defense, Mine
		InvalidTargets: NoAutoTarget
	AutoTargetPriority@ATTACKANYTHING:
		RequiresCondition: stance-attackanything || assault-move && botowner
		ValidTargets: Infantry, Vehicle, Ship, Underwater, AirborneActor, Structure, Defense, Mine
		InvalidTargets: NoAutoTarget
	AttackMove:
		AssaultMoveCondition: assault-move
	RenderSprites:
	Voiced:
		VoiceSet: ProtossDArchonVoice
	-DeathSounds@NORMAL:
	-DeathSounds@BURNED:
	-DeathSounds@ZAPPED:
	WithDeathAnimation:
		UseDeathTypeSuffix: false
		CrushedSequence: die
		CrushedSequencePalette: player
		CrushedPaletteIsPlayerPalette: true
	-SpawnActorOnDeath@fire:
	Passenger:
		Weight: 4
	MustBeDestroyed:
	ProximityCaptor:
		Types: Infantry
	AttackFrontal:
		FacingTolerance: 0
		RequiresCondition: ammo >= 180
	WithSpriteBody:
		Sequence: body
		Palette: player
		IsPlayerPalette: True
	WithIdleOverlay@1:
		Sequence: atom
		Palette: player
		IsPlayerPalette: True
	WithMakeAnimation:
		Sequence: make3
		Condition: forming
	ChangesHealth@start:
		PercentageStep: -75
		Delay: 250000
		StartIfBelow: 101
		DamageCooldown: 0
		RequiresCondition: forming
	ChangesHealth@forming:
		PercentageStep: 1
		Delay: 5
		StartIfBelow: 101
		DamageCooldown: 0
		RequiresCondition: forming
	ChangesHealth@shield:
		PercentageStep: 1
		Delay: 40
		StartIfBelow: 100
		DamageCooldown: 25
		PauseOnCondition: disabled || firedweapon
	GrantConditionOnAttack@1:
		Condition: firedweapon
		RevokeDelay: 750
	VoiceAnnouncement:
		RequiresCondition: !forming
		Voice: Build
	AmbientSound@forming:
		SoundFiles: ptesum00.aud
		RequiresCondition: forming
		Interval: 3000
	Explodes:
		Weapon: E100Cannon
		EmptyWeapon: E100Cannon
	-Crushable:

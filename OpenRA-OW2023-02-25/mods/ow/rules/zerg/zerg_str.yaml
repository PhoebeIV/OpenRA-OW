^ZergRegen:
	ChangesHealth@regen:
		PercentageStep: 1
		Delay: 125
		StartIfBelow: 100
		DamageCooldown: 250
	ChangesHealth@regen2:
		PercentageStep: 1
		Delay: 80
		StartIfBelow: 40
		DamageCooldown: 250


^ZergBuilding:
	Inherits: ^Building
	Inherits@regen: ^ZergRegen
	GrantConditionOnDamageState@blood1:
		Condition: damaged
		ValidDamageStates: Medium, Heavy, Critical
	GrantConditionOnDamageState@blood2:
		Condition: damaged2
		ValidDamageStates: Heavy, Critical
	GrantConditionOnDamageState@blood3:
		Condition: damaged3
		ValidDamageStates: Critical
	Buildable:
		Queue: Bot
		Prerequisites: ~disabled
		BuildDurationModifier: 40
	Building:
		BuildSounds: zbldgplc.aud
		AllowPlacementOnResources: true
		TerrainTypes: Creep
	RepairableBuilding:
		RepairStep: 400
		PlayerExperience: 2
		RepairPercent: 0
	ProximityExternalCondition@creepalive:
		Condition: creepalive
		Range: 3c0
	Explodes:
		Type: CenterPosition
		Weapon: LargeZergBuildingExplode
		EmptyWeapon: LargeZergBuildingExplode
	SoundOnDamageTransition:
		DamagedSounds: kaboom1.aud
		DestroyedSounds: zbldgdth.aud
	AmbientSound@completed:
		SoundFiles: zchrdy00.aud
		RequiresCondition: !build-incomplete
		Interval: -1
	ToggleConditionOnOrder@explode:
		OrderName: Sell
		Condition: sell_me
	KillsSelf@explode:
		RequiresCondition: sell_me

ZMCV:
	Inherits: MCV
	Inherits@selection: ^SelectableSupportUnit
	Buildable:
		Prerequisites: fix, ~mcv, ~techlevel.medium, ~vehicles.zerg
		Icon: icon-hatchery
	Transforms:
		IntoActor: zhatchery
		TransformSounds: zbldgplc.aud
		Facing: -256
		Offset: -1,0
	WithFacingSpriteBody:
		Sequence: stand
	WithMoveAnimation:
		MoveSequence: run
	WithDeathAnimation:
		DeathSequence: die
		UseDeathTypeSuffix: false
	-SpawnActorOnDeath:
	RenderSprites:
		Image: zdrone
	Voiced:
		VoiceSet: ZergDroneVoice


ZMCV.2:
	Inherits: ZMCV
	Buildable:
		Queue: Vehicle
		BuildPaletteOrder: 90
		BuildDurationModifier: 35
		Prerequisites: ~!mcv, ~techlevel.medium, ~vehicles.zerg
	Valued:
		Cost: 3000

CreepSpawnerBig:
	Inherits: 1TNK.MINE
	SpawnActorOnDeath:
		Actor: CreepGenBig
		OwnerType: Victim
	Explodes:
		Weapon: CreepSplashBig
		EmptyWeapon: CreepSplashBig

CreepSpawnerMedium:
	Inherits: CreepSpawnerBig
	SpawnActorOnDeath:
		Actor: CreepGenBig
	Explodes:
		Weapon: CreepSplashMed
		EmptyWeapon: CreepSplashMed

CreepGenBig:
	Inherits: MINE
	Inherits@shape: ^1x1Shape
	RenderSprites:
		Image: MINE
	-WithSpriteBody:
	-Interactable:
	-Tooltip:
	-AppearsOnRadar:
	-RadarColorFromTerrain:
	-AppearsOnMapPreview:
	-MapEditorData:
	-RequiresSpecificOwners:
	-ChangesHealth@1:
	-ChangesHealth@2:
	-ExplosionOnDamageTransition:
	Targetable:
		TargetTypes: CreepGenerator
	Health:
		HP: 500000
	ExternalCondition@creep:
		Condition: creepalive
	KillsSelf:
		RequiresCondition: !creepalive
		Delay: 25
	Explodes:
		Weapon: CreepRemoveBig
	SeedsResource:
		Interval: 1
		MaxRange: 9
		ResourceType: ZergCreep

CreepGenMed:
	Inherits: CreepGenBig
	Explodes:
		Weapon: CreepRemoveMed
	SeedsResource:
		Interval: 2
		MaxRange: 7
		ResourceType: ZergCreep

SmallZergBuildingComplete:
	Inherits: CreepSpawnerBig
	-SpawnActorOnDeath:
	Explodes:
		Weapon: SmallZergBuildingSpawn
		EmptyWeapon: SmallZergBuildingSpawn

MediumZergBuildingComplete:
	Inherits: SmallZergBuildingComplete
	Explodes:
		Weapon: MediumZergBuildingSpawn
		EmptyWeapon: MediumZergBuildingSpawn

LargeZergBuildingComplete:
	Inherits: SmallZergBuildingComplete
	Explodes:
		Weapon: LargeZergBuildingSpawn
		EmptyWeapon: LargeZergBuildingSpawn

ZHATCHERY:
	Inherits: ^ZergBuilding
	Inherits@prereqs: ^ConYardPrereqs
	Inherits@con: ^ConYard
	Inherits@shape: ^2x3Shape
	Inherits@PRIMARY: ^PrimaryBuilding
	Production@Bot:
		Produces: Bot
		RequiresCondition: botowner
	Exit@0:
		SpawnOffset: -600,810,0
		ExitCell: 0,2
	Exit@1:
		SpawnOffset: -600,810,0
		ExitCell: 1,2
	Exit@2:
		SpawnOffset: -170,810,0
		ExitCell: 2,2
		ProductionTypes: Infantry, Hatchery
	RallyPoint:
	Selectable:
		Bounds: 3072, 3072
	Building:
		Footprint: xxx x_x
		Dimensions: 3,2
		LocalCenterOffset: 0,-512,0
		BuildSounds: zbldgplc.aud
		TerrainTypes: Clear,Road,Creep
	Buildable:
		Queue: Building
		BuildPaletteOrder: 1000
		Prerequisites: ~disabled
		Description: Produces structures.
	Health:
		HP: 150000
	Armor:
		Type: Wood
	RevealsShroud:
		MinRange: 4c0
		Range: 5c0
		RevealGeneratedShroud: False
	RevealsShroud@GAPGEN:
		Range: 4c0
	Valued:
		Cost: 2000
	Tooltip:
		Name: Hatchery
	BaseBuilding:
	GrantConditionOnPrerequisite@GLOBALFACTUNDEPLOY:
		Condition: factundeploy
		Prerequisites: global-factundeploy
	Power:
		Amount: 10
	Production:
		Produces: Building,Defense,Tech,Wall,Hatchery
		RequiresCondition: !build-incomplete
	WithDeathAnimation:
		DeathSequence: dead
		UseDeathTypeSuffix: false
	ProvidesPrerequisite@buildingname:
	HitShape:
		TargetableOffsets: 1273,939,0, -980,-640,0, -980,640,0
		Type: Rectangle
			TopLeft: -1536, -1536
			BottomRight: 1536, 1536
	WithIdleOverlay@damage:
		RequiresCondition: damaged
		Sequence: blood1
		Offset: 1100,-512,0
	WithIdleOverlay@damage2:
		RequiresCondition: damaged2
		Sequence: blood2
		Offset: 512,700,0
	WithIdleOverlay@damage3:
		RequiresCondition: damaged3
		Sequence: blood4
		Offset: -600,0,0
	FreeActor:
		Actor: CreepSpawnerBig
		SpawnOffset: 1,0
		RequiresCondition: !build-incomplete
	FreeActor@effect_complete:
		Actor: MediumZergBuildingComplete
		SpawnOffset: 1,0
		RequiresCondition: !build-incomplete

ZCCOLONY:
	Inherits: ^ZergBuilding
	Inherits@shape: ^2x2Shape
	Inherits@selection: ^SelectableCombatBuilding
	Inherits@AUTOTARGET: ^AutoTargetAll
	RenderRangeCircle:
	Building:
		Footprint: xx ++
		Dimensions: 2,2
	Buildable:
		Queue: Wall
		BuildPaletteOrder: 450
		Prerequisites: ~structures.zerg, ~techlevel.infonly, ~ai.all
		Description: Spreads creep.
	Health:
		HP: 40000
	Armor:
		Type: Wood
	RevealsShroud:
		MinRange: 4c0
		Range: 5c0
		RevealGeneratedShroud: False
	RevealsShroud@GAPGEN:
		Range: 4c0
	Valued:
		Cost: 500
	Tooltip:
		Name: Creep Colony
		RequiresCondition: !waiting_to_evolve
	Tooltip@1:
		Name: Sunken Colony
		RequiresCondition: str_sunken
	Tooltip@2:
		Name: Spore Colony
		RequiresCondition: str_spore
	BaseBuilding:
	WithDeathAnimation:
		DeathSequence: dead
		UseDeathTypeSuffix: false
	ProvidesPrerequisite@buildingname:
	WithIdleOverlay@damage:
		RequiresCondition: damaged
		Sequence: blood1
		Offset: 1100,-512,0
	WithIdleOverlay@damage2:
		RequiresCondition: damaged2
		Sequence: blood3
		Offset: 512,700,0
	WithIdleOverlay@damage3:
		RequiresCondition: damaged3
		Sequence: blood4
		Offset: -256,0,0
	Explodes:
		Type: CenterPosition
		Weapon: SmallZergBuildingExplode
		EmptyWeapon: SmallZergBuildingExplode
	FreeActor:
		Actor: CreepSpawnerMedium
		SpawnOffset: 1,0
		RequiresCondition: !build-incomplete
	FreeActor@effect_complete:
		Actor: SmallZergBuildingComplete
		SpawnOffset: 1,0
		RequiresCondition: !build-incomplete
	ProductionBar@zergstructure:
		ProductionType: Building.ZergColony
		RequiresCondition: !waiting_to_evolve
	Production@zergstructure:
		Produces: Building.ZergColony
		RequiresCondition: !waiting_to_evolve && !build-incomplete
	ProductionQueue@zergstructure:
		Type: Building.ZergColony
		Group: Building
		DisplayOrder: 2
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Building
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
		QueueLimit: 1
	GrantConditionOnProduction@waiting_to_evolve:
		Condition: waiting_to_evolve
	GrantConditionOnProduction@sunken:
		Condition: str_sunken
		Actors: ZE.SUNKEN
	GrantConditionOnProduction@spore:
		Condition: str_spore
		Actors: ZE.SPORE
	GrantConditionOnProduction@animating:
		Condition: animating
		Duration: 110
	Targetable@defense:
		RequiresCondition: waiting_to_evolve
		TargetTypes: Defense
	AutoTarget:
		RequiresCondition: waiting_to_evolve
	WithIdleOverlay@main:
		Sequence: idle2
		RequiresCondition: !build-incomplete && !waiting_to_evolve
	WithSpriteBody@sunken:
		RequiresCondition: str_sunken
		StartSequence: sunken-make
		Sequence: sunken-turret
	WithSpriteBody@spore:
		RequiresCondition: str_spore
		StartSequence: sunken-make
		Sequence: spore-idle
	WithIdleOverlay@sunken_shadow:
		RequiresCondition: str_sunken && !animating
		Sequence: sunken-shadow
		IsPlayerPalette: true
		Palette: player
	WithSpriteTurret@sunken:
		RequiresCondition: str_sunken && !animating
		Sequence: sunken-turret
		Recoils: false
	WithTurretAttackAnimation@sunken:
		RequiresCondition: str_sunken && !animating
		Sequence: sunken-attack
	Turreted@sunken:
		RequiresCondition: str_sunken && !animating
	AttackTurreted:
		Turrets: primary, secondary
		FacingTolerance: 128
	Armament@sunken:
		RequiresCondition: str_sunken && !animating
		Weapon: SunkenAttack
		LocalOffset: 0,0,512
	Armament@spore:
		Name: secondary
		Turret: secondary
		RequiresCondition: str_spore && !animating
		Weapon: SporeAttack
	AmbientSound@evolved:
		SoundFiles: zchrdy00.aud
		RequiresCondition: waiting_to_evolve && !animating
		Interval: -1
	FreeActor@evolve_complete:
		Actor: SmallZergBuildingComplete
		SpawnOffset: 1,0
		RequiresCondition: waiting_to_evolve && !animating
	DetectCloaked:
		DetectionTypes: Cloak
		Range: 6c0
		RequiresCondition: str_spore
	Turreted@spore:
		RequiresCondition: str_spore && !animating
		Turret: secondary
		Offset: 0,-800,1200
	DamageMultiplier@evolved:
		Modifier: 80
		RequiresCondition: waiting_to_evolve


ZE.SUNKEN:
	Inherits: ^ZergEvolve
	Tooltip:
		Name: Evolve into Sunken Colony
	Buildable:
		Queue: Building.ZergColony
		BuildAtProductionType: Building.ZergColony
		Description: Anti-ground defensive structure. \n Cannot detect cloaked. \n\nStrong vs ground units
		Prerequisites: barracks, ~techlevel.infonly, ~zccolony
	Valued:
		Cost: 500
	RenderSprites:
		Image: zsunken

ZE.SPORE:
	Inherits: ^ZergEvolve
	Tooltip:
		Name: Evolve into Spore Colony
	Buildable:
		Queue: Building.ZergColony
		BuildAtProductionType: Building.ZergColony
		Description: Anti-air defensive structure. \n Detects cloaked units. \n\nStrong vs aircraft
		Prerequisites: barracks, ~techlevel.infonly, ~zccolony
	Valued:
		Cost: 500
	RenderSprites:
		Image: zspore

ZEXTRAC:
	Inherits: ^ZergBuilding
	Inherits@shape: ^3x2Shape
	Building:
		Footprint: +++ xxx ===
		Dimensions: 3,3
		LocalCenterOffset: 0,-768,0
	Selectable:
		Bounds: 3072, 3072, 0, -426
	Buildable:
		Queue: Wall
		BuildPaletteOrder: 450
		Prerequisites: ~structures.zerg, ~techlevel.infonly, ~ai.all, ~!ai.boss
		Description: Stores and refines resources.
	Health:
		HP: 90000
	Armor:
		Type: Wood
	RevealsShroud:
		MinRange: 4c0
		Range: 5c0
		RevealGeneratedShroud: False
	RevealsShroud@GAPGEN:
		Range: 4c0
	Refinery:
		DockAngle: 0
		DockOffset: 1,0
	StoresResources:
		Capacity: 2000
	Valued:
		Cost: 800
	Tooltip:
		Name: Extractor
	BaseBuilding:
	WithDeathAnimation:
		DeathSequence: dead
		UseDeathTypeSuffix: false
	ProvidesPrerequisite@buildingname:
	ProvidesPrerequisite:
		Prerequisite: refinery
	WithIdleOverlay@damage:
		RequiresCondition: damaged
		Sequence: blood1
		Offset: 1500,-512,0
	WithIdleOverlay@damage2:
		RequiresCondition: damaged2
		Sequence: blood3
		Offset: 512,700,0
	WithIdleOverlay@damage3:
		RequiresCondition: damaged3
		Sequence: blood4
		Offset: -1256,0,0
	InfiltrateForCash:
		Percentage: 50
		Types: SpyInfiltrate, ThiefInfiltrate
		InfiltratedNotification: CreditsStolen
		Maximum: 5000
	FreeActor@effect_complete:
		Actor: MediumZergBuildingComplete
		SpawnOffset: 1,0
		RequiresCondition: !build-incomplete
	WithResourceStoragePipsDecoration:
		Position: BottomLeft
		Margin: 4, 3
		RequiresSelection: true
		PipCount: 17
		FullSequence: pip-yellow

ZPOOL:
	Inherits: ^ZergBuilding
	Inherits@prereqs: ^BarracksPrereqs
	Inherits@shape: ^2x2Shape
	Building:
		Footprint: ++ xx
		Dimensions: 2,2
	Buildable:
		Queue: Wall
		BuildPaletteOrder: 450
		Prerequisites:  ~structures.zerg, ~techlevel.infonly, ~ai.all, ~!ai.boss
		Description: Allows production of zerglings
	Health:
		HP: 60000
	Armor:
		Type: Wood
	RevealsShroud:
		MinRange: 4c0
		Range: 5c0
		RevealGeneratedShroud: False
	RevealsShroud@GAPGEN:
		Range: 4c0
	Valued:
		Cost: 500
	Tooltip:
		Name: Spawning Pool
	BaseBuilding:
	WithDeathAnimation:
		DeathSequence: dead
		UseDeathTypeSuffix: false
	ProvidesPrerequisite@buildingname:
	WithIdleOverlay@damage:
		RequiresCondition: damaged
		Sequence: blood1
		Offset: 1200,-512,0
	WithIdleOverlay@damage2:
		RequiresCondition: damaged2
		Sequence: blood3
		Offset: 512,700,700
	WithIdleOverlay@damage3:
		RequiresCondition: damaged3
		Sequence: blood2
		Offset: -512,0,0
	InfiltrateForSupportPower:
		Proxy: barracks.upgraded
		Types: SpyInfiltrate
	Targetable:
		TargetTypes: GroundActor, C4, DetonateAttack, Structure, SpyInfiltrate
	Explodes:
		Type: CenterPosition
		Weapon: SmallZergBuildingExplode
		EmptyWeapon: SmallZergBuildingExplode
	Exit@1:
		RequiresCondition: !being-captured
		SpawnOffset: -42,810,0
		ExitCell: 1,2
		ProductionTypes: Soldier, Infantry
	Exit@2:
		RequiresCondition: !being-captured
		SpawnOffset: -725,640,0
		ExitCell: 0,2
		ProductionTypes: Soldier, Infantry
	Production:
		Produces: Infantry, Soldier
	GrantExternalConditionToProduced:
		Condition: produced
	ProductionBar:
		ProductionType: Infantry
	GrantExternalConditionToProduced@zergling:
		Condition: zerglingdouble
		Duration: 25

ZHYDRADEN:
	Inherits: ^ZergBuilding
	Inherits@prereqs: ^BarracksPrereqs
	Inherits@shape: ^3x2Shape
	Building:
		Footprint: +++ xxx ===
		Dimensions: 3,3
		LocalCenterOffset: 0,-768,0
	Selectable:
		Bounds: 3072, 3072, 0, -426
	Buildable:
		Queue: Wall
		BuildPaletteOrder: 450
		Prerequisites: zpool, ~structures.zerg, ~techlevel.infonly, ~ai.all
		Description: Allows production of hydralisks
	Health:
		HP: 90000
	Armor:
		Type: Wood
	RevealsShroud:
		MinRange: 4c0
		Range: 5c0
		RevealGeneratedShroud: False
	RevealsShroud@GAPGEN:
		Range: 4c0
	Valued:
		Cost: 1000
	Tooltip:
		Name: Hydralisk Den
	BaseBuilding:
	WithDeathAnimation:
		DeathSequence: dead
		UseDeathTypeSuffix: false
	ProvidesPrerequisite@buildingname:
	WithIdleOverlay@damage:
		RequiresCondition: damaged
		Sequence: blood2
		Offset: 1200,-512,0
	WithIdleOverlay@damage2:
		RequiresCondition: damaged2
		Sequence: blood1
		Offset: 512,700,700
	WithIdleOverlay@damage3:
		RequiresCondition: damaged3
		Sequence: blood3
		Offset: 0,-512,-256
	InfiltrateForSupportPower:
		Proxy: barracks.upgraded
		Types: SpyInfiltrate
	Targetable:
		TargetTypes: GroundActor, C4, DetonateAttack, Structure, SpyInfiltrate
	Exit@1:
		RequiresCondition: !being-captured
		SpawnOffset: -42,810,0
		ExitCell: 1,2
		ProductionTypes: Soldier, Infantry
	Exit@2:
		RequiresCondition: !being-captured
		SpawnOffset: -725,640,0
		ExitCell: 0,2
		ProductionTypes: Soldier, Infantry
	Production:
		Produces: Infantry, Soldier
	GrantExternalConditionToProduced:
		Condition: produced
	ProductionBar:
		ProductionType: Infantry

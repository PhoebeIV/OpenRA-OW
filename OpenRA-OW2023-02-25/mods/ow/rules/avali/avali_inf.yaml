^AvaliSoldier:
	Inherits: ^Soldier
	Inherits@hordebonus: ^hordebonus
	-ReloadDelayMultiplier@hordebonus:
	-ReloadDelayMultiplier@hordebonusupgrade1:
	-ReloadDelayMultiplier@hordebonusupgrade2:
	ProximityExternalCondition@hordebonus:
		Range: 3c0
	ProximityExternalCondition@hordebonusupgrade1:
		Range: 3c0
	ProximityExternalCondition@hordebonusupgrade2:
		Range: 3c0
	FirepowerMultiplier@hordebonus:
		RequiresCondition: hordebonus >= 15 && !upgradenationalism
		Modifier: 110
	FirepowerMultiplier@hordebonusupgrade1:
		RequiresCondition: hordebonusupgrade1 >= 15 && upgradenationalism
		Modifier: 115
	FirepowerMultiplier@hordebonusupgrade2:
		RequiresCondition: hordebonusupgrade2 >= 15
		Modifier: 120
	WithIdleOverlay@hordebonus:
		RequiresCondition: hordebonus >= 15 && !upgradenationalism
	WithIdleOverlay@hordebonusupgrade1:
		RequiresCondition: hordebonusupgrade1 >= 15 && upgradenationalism
	WithIdleOverlay@hordebonusupgrade2:
		RequiresCondition: hordebonusupgrade2 >= 15
	ProducibleWithLevel:
		Prerequisites: barracks.upgraded
	WithProductionIconOverlay:
		Types: Veterancy
		Prerequisites: barracks.upgraded
	WithInfantryBody:
		RequiresCondition: !idle_special
		DefaultAttackSequence: shoot
		IdleSequences: idle1,idle2,idle3,idle4,idle5,idle6
		MinIdleDelay: 30
		MaxIdleDelay: 175
	WithInfantryBody@special:
		RequiresCondition: idle_special
		DefaultAttackSequence: shoot
		StandSequences: idles1,idles2
	WithDeathAnimation:
		DeathTypes:
			DefaultDeath: 1,2
			BulletDeath: 4
			SmallExplosionDeath: 3
			ExplosionDeath: 3
			ElectricityDeath: 6
		CrushedSequence: die1
	GrantPeriodicCondition@special:
		CooldownDuration: 250, 500
		ActiveDuration: 125
		Condition: idle_special
		RequiresCondition: specialfella1 && specialfella2
	GrantRandomCondition@special1:
		Conditions: specialfella1,none,none,none,none,none,none,none,none,none,none
	GrantRandomCondition@special2:
		Conditions: specialfella2,none,none,none,none
	GrantConditionOnTileSet@cold:
		TileSets: SNOW
		Condition: env_buff
	SpeedMultiplier@cold:
		Modifier: 110
		RequiresCondition: env_buff
	Voiced:
		VoiceSet: AvaliGeneric

AVINF1:
	Inherits: ^AvaliSoldier
	Inherits@AUTOTARGET: ^AutoTargetGroundAssaultMove
	Buildable:
		Queue: Infantry
		BuildAtProductionType: Soldier
		Prerequisites: ~barracks, ~infantry.avalon, ~techlevel.infonly
		BuildPaletteOrder: 100
		Description: General-purpose infantry.\nCan gain Pack boost with a group of\n 15 or more. \\n  Strong vs Infantry, light vehicles\n  Weak vs Armored vehicles, Aircraft
	Tooltip:
		Name: Light Infantry
	Valued:
		Cost: 150
	Health:
		HP: 6500
	Mobile:
		PauseOnCondition: taunt_dance
	Armament@PRIMARY:
		Weapon: AvaliLaser
		LocalOffset: 400,0,380
		PauseOnCondition: (ammo == 10) || no_shoot
	Armament@GRENADE:
		Name: secondary
		Weapon: AvaliGrenade
		LocalOffset: 256,0,512
		FireDelay: 14
		PauseOnCondition: ammo < 10
		AmmoUsage: 10
	Armament@GARRISONED:
		Name: garrisoned
		Weapon: Vulcan
		MuzzleSequence: garrison-muzzle
	AmmoPool:
		Name: secondary
		Armaments: secondary
		AmmoCondition: ammo
		InitialAmmo: 2
		Ammo: 10
	ReloadAmmoPool:
		AmmoPool: secondary
		Delay: 12
		RequiresCondition: grenade_tick
	GrantConditionOnAttack@grenade:
		ArmamentNames: primary
		Condition: grenade_reload
		RevokeDelay: 30
	GrantConditionOnAttack@grenadethrown:
		ArmamentNames: secondary
		Condition: no_shoot
		RevokeDelay: 10
	GrantPeriodicCondition@grenade:
		Condition: grenade_tick
		RequiresCondition: grenade_reload
		CooldownDuration: 1,6
		ActiveDuration: 14
	TakeCover:
		ProneOffset: 0,0,-331
	WithInfantryBody:
		-DefaultAttackSequence:
		AttackSequences: 
			primary: shoot
			secondary: grenade
		RequiresCondition: !idle_special && !taunt_dance
	WithInfantryBody@special:
		-DefaultAttackSequence:
		AttackSequences: 
			primary: shoot
			secondary: grenade
		RequiresCondition: idle_special && !taunt_dance
	WithInfantryBody@taunt:
		RequiresCondition: taunt_dance
		StandSequences: idles3
	GrantTimedCondition@dance:
		RequiresCondition: rank-veteran && specialfella2
		Condition: taunt_dance
		Duration: 150
	AmbientSound@dance:
		SoundFiles: dancemoves.aud
		Interval: 150
		RequiresCondition: taunt_dance

AVINF2:
	Inherits: ^AvaliSoldier
	Inherits@selection: ^SelectableSupportUnit
	Buildable:
		Queue: Infantry
		BuildAtProductionType: Soldier
		BuildPaletteOrder: 101
		Prerequisites: ~barracks, ~techlevel.infonly, ~infantry.avalon
		Description: Infiltrates and captures\nenemy structures.\n  Unarmed
	Valued:
		Cost: 400
	Mobile:
		Speed: 64
	Tooltip:
		Name: Engineer
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	WithInfantryBody:
		RequiresCondition: !parachute
	WithInfantryBody@PARACHUTE:
		StandSequences: parachute
		RequiresCondition: parachute
		Palette: player-noshadow
		IsPlayerPalette: true
	Passenger:
		CustomPipType: yellow
	InstantlyRepairs:
	RepairsBridges:
	CaptureManager:
	WithInfantryBody:
		-RequiresCondition: 
		StandSequences: stand
		IdleSequences: idle
	-WithInfantryBody@special:
	GrantConditionOnPrerequisite@GLOBALREUSABLEENGINEER:
		Condition: global-reusable-engineers
		Prerequisites: global-reusable-engineers
	Captures:
		RequiresCondition: !global-reusable-engineers
		CaptureTypes: building
		PlayerExperience: 10
		CaptureDelay: 200
	Captures@REUSABLE:
		RequiresCondition: global-reusable-engineers
		CaptureTypes: building
		PlayerExperience: 10
		CaptureDelay: 375
		ConsumedByCapture: False
		EnterCursor: ability
		EnterBlockedCursor: move-blocked
	Infiltrates:
		Types: Husk
		ValidRelationships: Ally
		EnterCursor: goldwrench
		PlayerExperience: 25
	Captures@husk:
		CaptureTypes: husk
		PlayerExperience: 25
		CaptureDelay: 100
		EnterCursor: goldwrench
		ConsumedByCapture: true
	-AttackFrontal:
^ExistsInWorld:
	ExternalCondition@stealthgen:
		Condition: stealthgen
	ExternalCondition@disabled:
		Condition: disabled
	Cloak@stealthgen:
		IsPlayerPalette: true
		InitialDelay: 25
		CloakDelay: 100
		CloakSound: cloak5.aud
		RequiresCondition: stealthgen && !disabled
		UncloakOn: Attack, Unload, Infiltrate, Demolish, Damage
		CloakedCondition: cloaked

^3x3Shape:
	HitShape:
		UseTargetableCellsOffsets: true
		Type: Rectangle
			TopLeft: -1536, -1536
			BottomRight: 1536, 1536

^2x3Shape:
	HitShape:
		UseTargetableCellsOffsets: true
		Type: Rectangle
			TopLeft: -1024, -1536
			BottomRight: 1024, 1536

# Painstakingly added to allow bibs to toggle off. Consequently, this means the coloured overlays (ie. powered off) will change the bib too.
^2xBuildingBib:
	GrantConditionOnTileSet@temp:
		TileSets: TEMPERAT, INTERIOR
		Condition: tile_temp
	GrantConditionOnTileSet@snow:
		TileSets: SNOW
		Condition: tile_snow
	GrantConditionOnTileSet@des:
		TileSets: DESERT
		Condition: tile_des
	GrantConditionOnTerrain@pavement:
		TerrainTypes: Road
		Condition: no_bib
	GrantConditionOnTerrain@snow:
		TerrainTypes: ClearSnow
		Condition: tile_snow
	WithIdleOverlay@bibtemp:
		RequiresCondition: tile_temp && !no_bib && !tile_snow
		Sequence: temp
		Image: bib3compiled
		Palette: terrain
	WithIdleOverlay@bibsnow:
		RequiresCondition: tile_snow && !no_bib
		Sequence: snow
		Image: bib3compiled
		Palette: terrain
	WithIdleOverlay@bibdes:
		RequiresCondition: tile_des && !no_bib
		Sequence: des
		Image: bib3compiled
		Palette: terrain

^3xBuildingBib:
	Inherits: ^2xBuildingBib
	WithIdleOverlay@bibtemp:
		Image: bib2compiled
	WithIdleOverlay@bibsnow:
		Image: bib2compiled
	WithIdleOverlay@bibdes:
		Image: bib2compiled

^3x4BuildingBib:
	Inherits: ^2xBuildingBib
	WithIdleOverlay@bibtemp:
		Image: bib2compiled_offset3x4
	WithIdleOverlay@bibsnow:
		Image: bib2compiled_offset3x4
	WithIdleOverlay@bibdes:
		Image: bib2compiled_offset3x4

^4xBuildingBib:
	Inherits: ^2xBuildingBib
	WithIdleOverlay@bibtemp:
		Image: bib1compiled
	WithIdleOverlay@bibsnow:
		Image: bib1compiled
	WithIdleOverlay@bibdes:
		Image: bib1compiled

# Applies to infantry and vehicles. This is used for GLA's GPS Scrambler which enables a cloak
# Also used for Protoss Arbiter/Mothership/Dark Pylon cloaking field
# Zerg Queen ensnare effect, and the Protoss Time Stop ability
^GPSScramblable:
	ExternalCondition@gpsscrambler:
		Condition: gpsscrambler
	Cloak@gpsscrombler:
		IsPlayerPalette: true
		InitialDelay: 25
		CloakDelay: 75
		CloakSound: cloak5.aud
		RequiresCondition: gpsscrambler && !disabled
		UncloakOn: Attack, Unload, Infiltrate, Demolish, Damage
		DetectionType: gpsscrambler
		CloakedCondition: cloaked
	ExternalCondition@arbiterstealth:
		Condition: arbiterstealth
	Cloak@arbiterstealth:
		IsPlayerPalette: true
		InitialDelay: 25
		CloakDelay: 25
		CloakSound: tphclo00.aud
		UncloakSound: tphclo01.aud
		RequiresCondition: arbiterstealth && !disabled
		UncloakOn: Attack, Unload, Infiltrate, Demolish
		CloakedCondition: cloaked
	WithColoredOverlay@ensnare:
		RequiresCondition: queen_ensnare && !gdi_suits
		Color: 80AA0040
	ExternalCondition@ensnare:
		Condition: queen_ensnare
	SpeedMultiplier@ensnare:
		RequiresCondition: queen_ensnare && !gdi_suits
		Modifier: 65
	ReloadDelayMultiplier@ensnare:
		RequiresCondition: queen_ensnare && !gdi_suits
		Modifier: 133
	WithColoredOverlay@parasite:
		RequiresCondition: queen_parasite
		Color: 99AA0025
	ExternalCondition@parasite:
		Condition: queen_parasite
	RevealsShroud@parasite:
		Range: 5c0
		Type: GroundPosition
		ValidRelationships: Enemy
		RequiresCondition: queen_parasite
	ExternalCondition@timestop:
		Condition: timestop
	SpeedMultiplier@timestop:
		RequiresCondition: timestop
		Modifier: 0
	RangeMultiplier@timestop:
		RequiresCondition: timestop
		Modifier: 1
	WithColoredOverlay@timestop:
		RequiresCondition: timestop
		Color: 806D005A

# Applies to infantry, vehicles, aircraft and structures. This was primarily used add a damage resistance debuff caused by toxin weapons
# GDI Suits upgrade grants immunity to some of these debuffs.
# Used also for the Zerg Defiler plague attack (and superweapon), USA Avenger target painting, Terran Science Vessel irradiate, Nod Fanatics reload speed upgrade
# Japan Dominatrix debuff/buffs, Akuma effect, and a SupportPowerConsiderer for AI
^CorrodesFromTibWeaps:
	ExternalCondition@corrode:
		Condition: corrode
	DamageMultiplier@corrode:
		RequiresCondition: corrode && !gdi_suits && !medishield
		Modifier: 110
	WithColoredOverlay@corrode:
		RequiresCondition: corrode && !gdi_suits && !medishield
		Color: 00800040
	ExternalCondition@carrier:
		Condition: carriertarget
	Targetable@carrier:
		RequiresCondition: carriertarget
		TargetTypes: CarrierTarget
	ExternalCondition@plague:
		Condition: defiler_plague
	WithColoredOverlay@plague:
		RequiresCondition: defiler_plague
		Color: 80000040
	ChangesHealth@plague:
		Step: -101
		Delay: 5
		StartIfBelow: 101
		DamageTypes: BypassShield
		RequiresCondition: defiler_plague && enough_health
	GrantConditionOnDamageState@plague:
		Condition: enough_health
		ValidDamageStates: Undamaged, Light, Medium, Heavy
	ExternalCondition@avengermarked:
		Condition: avengermarked
	DamageMultiplier@avengermarked:
		RequiresCondition: avengermarked
		Modifier: 120
	WithColoredOverlay@avengermarked:
		RequiresCondition: avengermarked
		Color: 0000FF40
	GrantConditionOnPrerequisite@GDIsuits:
		Prerequisites: gdi.suits
		Condition: gdi_suits
	DamageMultiplier@corrode:
		RequiresCondition: corrode && gdi_suits && !medishield
		Modifier: 75
	GrantConditionOnPrerequisite@fanatics:
		Prerequisites: nod.fanatic
		Condition: nod_fanatics
	ReloadDelayMultiplier@fanatics:
		RequiresCondition: nod_fanatics
		Modifier: 90
	ExternalCondition@irradiate:
		Condition: irradiate
	ChangesHealth@irradiate:
		Step: -200
		Delay: 5
		StartIfBelow: 101
		DamageTypes: FireDeath
		RequiresCondition: irradiate
	ExplosionOnDamageTransition@irrad2:
		RequiresCondition: irradiate
		DamageState: Medium
		Weapon: VesselIrradiateDamage
	ExplosionOnDamageTransition@irrad3:
		RequiresCondition: irradiate
		DamageState: Heavy
		Weapon: VesselIrradiateDamage
	ExplosionOnDamageTransition@irrad4:
		RequiresCondition: irradiate
		DamageState: Critical
		Weapon: VesselIrradiateSpread
		TriggerOnlyOnce: true
	ExternalCondition@dominatrix:
		Condition: dominatrix
	DamageMultiplier@dominatrix:
		RequiresCondition: dominatrix
		Modifier: 150
	FirepowerMultiplier@dominatrix:
		RequiresCondition: dominatrix
		Modifier: 50
	PowerMultiplier@dominatrix:
		RequiresCondition: dominatrix
		Modifier: 150
	WithColoredOverlay@dominatrix:
		RequiresCondition: dominatrix
		Color: 93009e40
	ExternalCondition@akuma:
		Condition: akuma
	DamageMultiplier@akuma:
		RequiresCondition: akuma
		Modifier: 150
	FirepowerMultiplier@akuma:
		RequiresCondition: akuma
		Modifier: 50
	PowerMultiplier@akuma:
		RequiresCondition: akuma
		Modifier: 150
	WithColoredOverlay@akuma:
		RequiresCondition: akuma
		Color: ff000040
	WithIdleOverlay@akuma:
		Image: akuma-overlay
		Sequence: akuma-vehicle
		Palette: effect
		RequiresCondition: akuma
		IsDecoration: True
	ChangesHealth@akuma:
		Step: -150
		Delay: 25
		StartIfBelow: 101
		DamageTypes: ElectricityDeath
		RequiresCondition: akuma
	ExternalCondition@support:
		Condition: SupportPowerConsiderer
	Targetable@support:
		RequiresCondition: SupportPowerConsiderer
		TargetTypes: SupportPowerConsiderer

# Inherited and changed from mods/ra to add support from Estonia's Iron Shroud structure
^IronCurtainable:
	WithColoredOverlay@ironshroud:
		RequiresCondition: ironshroud
		Color: 80000040
	DamageMultiplier@ironshroud:
		RequiresCondition: ironshroud
		Modifier: 40
	ExternalCondition@ironshroud:
		Condition: ironshroud

# Inherited and changed from mods/ra to make ranked up actors give more experience when killed.
^GainsExperience:
	GivesExperienceMultiplier@RANK-1:
		RequiresCondition: rank-veteran == 1
		Modifier: 150
	GivesExperienceMultiplier@RANK-2:
		RequiresCondition: rank-veteran == 2
		Modifier: 200
	GivesExperienceMultiplier@RANK-3:
		RequiresCondition: rank-veteran == 3
		Modifier: 250
	GivesExperienceMultiplier@RANK-ELITE:
		RequiresCondition: rank-elite
		Modifier: 300

# Given to actors that would normally have the experience traits, but want them removed.
^NoExp:
	Inherits: ^GainsExperience
	-GainsExperience:
	-GrantCondition@RANK-ELITE:
	-DamageMultiplier@RANK-1:
	-DamageMultiplier@RANK-2:
	-DamageMultiplier@RANK-3:
	-DamageMultiplier@RANK-ELITE:
	-FirepowerMultiplier@RANK-1:
	-FirepowerMultiplier@RANK-2:
	-FirepowerMultiplier@RANK-3:
	-FirepowerMultiplier@RANK-ELITE:
	-SpeedMultiplier@RANK-1:
	-SpeedMultiplier@RANK-2:
	-SpeedMultiplier@RANK-3:
	-SpeedMultiplier@RANK-ELITE:
	-ReloadDelayMultiplier@RANK-1:
	-ReloadDelayMultiplier@RANK-2:
	-ReloadDelayMultiplier@RANK-3:
	-ReloadDelayMultiplier@RANK-ELITE:
	-ChangesHealth@ELITE:
	-WithDecoration@RANK-1:
	-WithDecoration@RANK-2:
	-WithDecoration@RANK-3:
	-WithDecoration@RANK-ELITE:

# Default actor type to allow the Shielded trait to work properly, this is given to structures, infantry, vehicles and aircraft
^AcceptsShields:
	Shielded:
		MaxStrength: -1
		RegenAmount: 350
		RegenInterval: 20
		RegenDelay: 125
		SelectionBarColor: AAAAFF
		ShieldsUpCondition: shielded
		ShieldsDamagedCondition: damaged_shield
		BypassDamageTypes: BypassShield
		OverrideDamageType: BypassedShield
		RequiresCondition: external_shield && !emp_shields && !defense_matrix
		HideBarWhenFull: true
	ShieldRegenMultiplier:
		Modifier: 5
		RequiresCondition: shield_regen
	ExternalCondition@shieldregen:
		Condition: shield_regen
	Targetable@shielddamage:
		TargetTypes: ShieldRegen
		RequiresCondition: damaged_shield
	Targetable@shieldeff:
		TargetTypes: ShieldHit
		RequiresCondition: shielded || defense_matrix_up
	Armor@shield:
		RequiresCondition: shielded || defense_matrix_up
		Type: Shield
	Armor:
		RequiresCondition: !shielded && !defense_matrix_up
	ExternalCondition@extshield:
		Condition: external_shield
	ExternalCondition@empshield:
		Condition: emp_shields
	ChangesHealth@plague:
		Step: -10001
		RequiresCondition: defiler_plague && enough_health && shielded
	ChangesHealth@plaguenoshield:
		Step: -101
		Delay: 5
		StartIfBelow: 101
		DamageTypes: BypassShield
		RequiresCondition: defiler_plague && enough_health && !shielded
	WithColoredOverlay@shielded:
		RequiresCondition: external_shield && shielded && !damaged_shield
		Color: 00FBFF0A
	ShieldRegenMultiplier@darkpylon:
		Modifier: 50
		RequiresCondition: dark_pylon
	ExternalCondition@darkpylon:
		Condition: dark_pylon
	GrantConditionOnPrerequisite@fedshields:
		Prerequisites: fed.shields, ulttechcenter
		Condition: external_shield

# Default actor type to allow boosts received from the France AEIOU unit
# This also enables the Allied training upgrade to work, and Communications Center tech building passive effect.
^AEIOUBoosted:
	ExternalCondition@aeiouboost:
		Condition: aeiouboost
	DamageMultiplier@aeiouboost:
		RequiresCondition: aeiouboost
		Modifier: 90
	FirepowerMultiplier@aeiouboost:
		RequiresCondition: aeiouboost
		Modifier: 110
	ReloadDelayMultiplier@aeiouboost:
		RequiresCondition: aeiouboost
		Modifier: 90
	WithDecoration@aeiouboost:
		Image: pips
		Sequence: pip-aeiou
		Palette: effect
		Position: TopRight
		ValidRelationships: None,Neutral,Enemy,Ally
		RequiresCondition: aeiouboost
	GrantConditionOnPrerequisite@commcentre:
		Prerequisites: miss
		Condition: missboost
	RevealsShroudMultiplier@commcentre:
		RequiresCondition: missboost
		Modifier: 120
	GrantConditionOnPrerequisite@alliesupgrade:
		Prerequisites: allies.training1
		Condition: allies_training
	RevealsShroudMultiplier@alliesupgrade:
		RequiresCondition: allies_training
		Modifier: 110
	RangeMultiplier@alliesupgrade:
		RequiresCondition: allies_training
		Modifier: 110

# Inherited and changed from mods/ra to add special bounty properties for GLA and Zerg Kerrigan factions
^GlobalBounty:
	ExternalCondition@GLAbounty: # this allows GLA to gain bounty on kills, but only within range of units/structures.
		Condition: glabounty
	ExternalCondition@kerriganbounty: # same but Kerrigan who doesn't allow crates to drop
		Condition: zergbounty
	GivesBounty:
		RequiresCondition: global-bounty && !glabounty && !zergbounty
	GivesBounty@GLA:
		RequiresCondition: !global-bounty && (glabounty || zergbounty)
		Percentage: 5
	GivesBounty@GLAglobal:
		RequiresCondition: global-bounty && (glabounty || zergbounty)
		Percentage: 20
	GrantConditionOnFaction@glabounty:
		Factions: thrax, demo, kassad
		Condition: glabountyexternal
	ProximityExternalCondition@glabounty:
		RequiresCondition: glabountyexternal
		Condition: glabounty
		ValidRelationships: Enemy
		AffectsParent: false
		Range: 6c0
	GrantRandomCondition@glabounty:
		Conditions: crate1, crate2, crate2, crate3, crate4, crate4, crate4
	SpawnActorOnDeath@crate1:
		RequiresCondition: glabounty && crate1 && !cantdropcrate
		Actor: crate
		Probability: 1
	SpawnActorOnDeath@crate2:
		RequiresCondition: glabounty && crate2 && !cantdropcrate
		Actor: moneycrate2
		Probability: 1
	SpawnActorOnDeath@crate3:
		RequiresCondition: glabounty && crate3 && !cantdropcrate
		Actor: crate.fuckyou
		Probability: 1
	SpawnActorOnDeath@crate4:
		RequiresCondition: glabounty && crate4 && !cantdropcrate
		Actor: moneycratesupplydrop
		Probability: 5

# Default actor type for Construction Yards. It inherits ^AdvTechPips which shows the player's current upgrade levels.
# It also provides universal prerequisites that allows for the "emergency" MCV production to work
# If owned by AI, it emits an aura that AI-controlled surveyors check for. If they're outside the range, they will deploy.
^ConYard:
	Inherits@pips: ^AdvTechPips
	-AlwaysVisible:
	WithDecoration@frame:
		RequiresCondition: !build-incomplete
	BaseProvider:
		Range: 16c0
		RequiresCondition: !botowner
	BaseProvider@bot:
		Range: 20c0
		RequiresCondition: botowner
	Production:
		Produces: Building,Defense,Tech,Wall
	Production@Bot:
		Produces: Bot
		RequiresCondition: botowner
	ProximityExternalCondition@surveyor:
		RequiresCondition: botowner
		Condition: surveyor_near_base
		Range: 22c0
	Exit:
	ProductionBar@Building:
		ProductionType: Building
	ProductionBar@Defense:
		ProductionType: Defense
		Color: FF8C00
	ProductionBar@Tech:
		ProductionType: Tech
		Color: 9FFF42
	ProductionBar@Wall:
		ProductionType: Wall
		Color: EEE9FF
	ProductionBar@Upgrade:
		ProductionType: Upgrade
		Color: DB00FF
	ProvidesPrerequisite@conyard:
		Prerequisite: conyard
	ProvidesPrerequisite@mcv:
		Prerequisite: mcv
	GrantConditionOnPrerequisite@botowner:
		Condition: botowner
		Prerequisites: ai.all

# Default actor for refineries, provides the "refinery" prerequisite
^Refinery:
	GrantConditionOnPrerequisite@botowner:
		Condition: botowner
		Prerequisites: ai.all
	GrantConditionOnPrerequisite@medAI:
		Condition: ai.medium
		Prerequisites: ai.medium
	GrantConditionOnPrerequisite@hardAI:
		Condition: ai.hard
		Prerequisites: ai.hard
	GrantConditionOnPrerequisite@harderAI:
		Condition: ai.harder
		Prerequisites: ai.harder
	ResourceValueMultiplier@medAI:
		RequiresCondition: ai.medium
		Modifier: 150
	ResourceValueMultiplier@hardAI:
		RequiresCondition: ai.hard && !ai.harder
		Modifier: 225
	ResourceValueMultiplier@harderAI:
		RequiresCondition: ai.harder
		Modifier: 300
	GrantConditionOnPrerequisite@processing:
		Prerequisites: nod.tiberium
		Condition: processing
	ResourceValueMultiplier@processing:
		RequiresCondition: processing
		Modifier: 110
	ProductionCostMultiplier@ainoref: 
		Prerequisites: ai.all, !refinery
		Multiplier: 10
		Queue: Building
	ProductionTimeMultiplier@ainoref: 
		Prerequisites: ai.all, !refinery
		Multiplier: 900
		Queue: Building
	ProvidesPrerequisite:
		Prerequisite: refinery

# Default actor to be used by Tech Center type buildings. It allows all factions access to the GPS, as long as they also have a Radio Telescope on the field.
^TechCenter:
	GpsPower@global:
		Prerequisites: radio.p
		PauseOnCondition: disabled || jammed
		Icon: gps
		OneShot: true
		ChargeInterval: 1500
		Name: GPS Satellite
		Description: Reveals map terrain and provides tactical\ninformation.
		RevealDelay: 375
		LaunchSound: satlnch1.aud
	ProvidesPrerequisite:
		Prerequisite: techcenter
	Valued:
		Cost: 1500
	Power:
		Amount: -100
	SupportPowerChargeBar:

# Building except with the Tiberian Dawn build sounds
^DawnBuilding:
	Inherits: ^Building
	Building:
		BuildSounds: constru2.aud, hvydoor1.aud


# Inherited and changed from mods/ra to add upgrade modifiers and numerous other buff/debuff modifiers from support powers
^Infantry:
	Inherits@MediConditions: ^MediConditionsI
	Inherits@corrode: ^CorrodesFromTibWeaps
	Inherits@aeiou: ^AEIOUBoosted
	Inherits@gps: ^GPSScramblable
	Inherits@shields: ^AcceptsShields
	Inherits@advancedtraining: ^AdvancedTraining
	Inherits@usabombardment: ^USAStrategyBuffs
	Inherits@frenzyboost: ^FrenzyBoostInfantry
	Inherits@propagandaboost: ^propagandaboostinfantry
	Inherits@japanbuffs: ^japanbuffs_infantry
	GrantCondition@crate:
		Condition: cantdropcrate
	OwnerLostAction:
		Action: ChangeOwner
		Owner: Creeps
	Crushable:
	RevealOnFire:
	Tooltip:
		Name: meta-infantry-generic-name
		GenericName: meta-infantry-generic-name
	GrantConditionOnPrerequisite@iar1:
		Prerequisites: upgrade.infarmor1
		Condition: iar1
	GrantConditionOnPrerequisite@iar2:
		Prerequisites: upgrade.infarmor2
		Condition: iar2
	GrantConditionOnPrerequisite@iar3:
		Prerequisites: upgrade.infarmor3
		Condition: iar3
	GrantConditionOnPrerequisite@ifp1:
		Prerequisites: upgrade.inffirepower1
		Condition: ifp1
	GrantConditionOnPrerequisite@ifp2:
		Prerequisites: upgrade.inffirepower2
		Condition: ifp2
	GrantConditionOnPrerequisite@ifp3:
		Prerequisites: upgrade.inffirepower3
		Condition: ifp3
	DamageMultiplier@iar1:
		RequiresCondition: iar1 && (!iar2 && !corrode && !defiler_plague)
		Modifier: 85
	DamageMultiplier@iar2:
		RequiresCondition: iar2 && (!iar3 && !corrode && !defiler_plague)
		Modifier: 70
	DamageMultiplier@iar3:
		RequiresCondition: iar3 && (!corrode && !defiler_plague)
		Modifier: 55
	FirepowerMultiplier@ifp1:
		RequiresCondition: ifp1 && !ifp2
		Modifier: 115
	FirepowerMultiplier@ifp2:
		RequiresCondition: ifp2 && !ifp3
		Modifier: 130
	FirepowerMultiplier@ifp3:
		RequiresCondition: ifp3
		Modifier: 145
	ProductionCostMultiplier@upgrade1:
		Prerequisites: infantry.prodcost
		Multiplier: 90
	ProductionTimeMultiplier@upgrade1:
		Prerequisites: infantry.prodtime
		Multiplier: 80
	ProductionCostMultiplier@upgrade2:
		Prerequisites: infantry.prodcost2
		Multiplier: 90
	ProductionTimeMultiplier@upgrade2:
		Prerequisites: infantry.prodtime2
		Multiplier: 80
	ProductionTimeMultiplier@glapower: 
		Prerequisites: anypower, infantry.gla
		Multiplier: 80
	GrantConditionOnPrerequisite@firespeed1:
		Prerequisites: infantry.firespeed1
		Condition: infantry.firespeed1
	ReloadDelayMultiplier@firespeed1:
		RequiresCondition: infantry.firespeed1
		Modifier: 90
	Targetable@parachute:
		RequiresCondition: parachute
		TargetTypes: AirborneActor
	DamageMultiplier@parachute:
		RequiresCondition: parachute
		Modifier: 500
	ExternalCondition@squadboost:
		Condition: squadboost
	SpeedMultiplier@squadboost:
		RequiresCondition: squadboost
		Modifier: 110
	ReloadDelayMultiplier@squadboost:
		RequiresCondition: squadboost
		Modifier: 85
	ExternalCondition@hospitalhealciv:
		Condition: hospitalhealciv
	ChangesHealth@HOSPITALCIV:
		Step: 500
		Delay: 100
		StartIfBelow: 100
		DamageCooldown: 125
		RequiresCondition: hospitalhealciv
	ExternalCondition@hospitalheal:
		Condition: hospital
	ExternalCondition@flagboost:
		Condition: flagboost
	FirepowerMultiplier@flagfirepowerboost:
		RequiresCondition: flagboost
		Modifier: 130
	InaccuracyMultiplier@flagaccuracyboost:
		RequiresCondition: flagboost
		Modifier: 50
	ExternalCondition@bioboost:
		Condition: bioboost
	SpeedMultiplier@biospeedboost:
		RequiresCondition: bioboost
		Modifier: 140
	ReloadDelayMultiplier@bioreloadboost:
		RequiresCondition: bioboost
		Modifier: 75
	DamageMultiplier@biodefenseboost:
		RequiresCondition: bioboost
		Modifier: 75
	ChangesHealth@aeiouboost:
		RequiresCondition: aeiouboost
		PercentageStep: 3
		Delay: 25
		StartIfBelow: 90
		DamageCooldown: 50
	ExternalCondition@demoralise:
		Condition: demoralise
	SpeedMultiplier@demoralise:
		RequiresCondition: demoralise
		Modifier: 90
	ReloadDelayMultiplier@demoralise:
		RequiresCondition: demoralise
		Modifier: 115
	WithDecoration@demoralise:
		Image: pips
		Sequence: pip-minus
		Palette: effect
		Position: TopRight
		ValidRelationships: None,Neutral,Enemy,Ally
		RequiresCondition: demoralise && !squadboost
	DeathSounds@NORMAL:
		DeathTypes: DefaultDeath, BulletDeath, SmallExplosionDeath, ExplosionDeath, SpawnCubeDeath
	DeathSounds@BURNED:
		Voice: Burned
		DeathTypes: FireDeath, TiberiumDeath
	DeathSounds@ZAPPED:
		Voice: Die
		DeathTypes: ElectricityDeath
	Explodes@elec:
		Weapon: Electro
		EmptyWeapon: Electro
		DeathTypes: ElectricityDeath
	Explodes@tiberium:
		Weapon: TSInfExplode
		EmptyWeapon: TSInfExplode
		DeathTypes: TiberiumDeath, SpawnCubeDeath
	Explodes@fire:
		Weapon: InfFireball
		EmptyWeapon: InfFireball
		DeathTypes: FireDeath
	ChangesHealth@tiberium:
		RequiresCondition: standing_in_tiberium && shielded && !gdi_suits
		DamageTypes: TiberiumDeath, BypassShield
		Step: -20000
		Delay: 16
		StartIfBelow: 101
	ChangesHealth@tiberium_noshield:
		RequiresCondition: standing_in_tiberium && !shielded && !gdi_suits
		DamageTypes: TiberiumDeath
		Step: -200
		Delay: 16
		StartIfBelow: 101
	GrantConditionOnTerrain@tiberium:
		Condition: standing_in_tiberium
		TerrainTypes: Tiberium, BlueTiberium
	ChangesHealth@radiation:
		RequiresCondition: standing_in_radiation && !gdi_suits
		DamageTypes: FireDeath, TriggerProne
		Step: -200
		Delay: 16
		StartIfBelow: 101
	GrantConditionOnTerrain@radiation:
		Condition: standing_in_radiation
		TerrainTypes: Radiation
	SpawnActorOnDeath@tiberium:
		Actor: vice
		Probability: 5
		OwnerType: InternalName
		InternalOwner: Creeps
		DeathType: TiberiumDeath
		RequiresLobbyCreeps: true
	SpawnActorOnDeath@cube:
		Probability: 15
		Actor: helld6
		OwnerType: Killer
		DeathType: SpawnCubeDeath
		RequiresLobbyCreeps: false
	SpawnActorOnDeath@fire:
		Actor: flameguy
		DeathType: FireDeath
	SpawnActorOnDeath@zombie:
		Actor: Zombie
		OwnerType: Killer
		DeathType: ZombieDeath
	-WithDeathAnimation:
	WithDeathAnimation:
		DeathTypes:
			DefaultDeath: 1
			BulletDeath: 2
			SmallExplosionDeath: 3
			ExplosionDeath: 4
			ElectricityDeath: 6
		CrushedSequence: die-crushed
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	TurnOnIdle:
	DetectCloaked:
		DetectionTypes: Cloak
		Range: 1c512
	DetectCloaked@GPS:
		Range: 1c512
		DetectionTypes: gpsscrambler
	TemporaryOwnerManager:
	GainsExperienceMultiplier:
		Modifier: 25
		RequiresCondition: disable-experience
	ExternalCondition@beinghealed:
		Condition: healed
	Targetable@beinghealed:
		RequiresCondition: healed && !botowner
		TargetTypes: BeingHealed
	GrantConditionOnPrerequisite@botowner:
		Condition: botowner
		Prerequisites: ai.all
	Targetable@cloaked:
		RequiresCondition: cloaked
		TargetTypes: NoAITarget
	DetectCloakedMultiplier@botowner:
		RequiresCondition: botowner
		Modifier: 150
	TeleportNetworkTransportable:
	WithIdleOverlay@akuma:
		Image: akuma-overlay
		Sequence: akuma-infantry
		Palette: effect
		RequiresCondition: akuma
		IsDecoration: True
	ExternalCondition@wander:
		Condition: wander
	Wanders@default:
		RequiresCondition: wander

^Cyborg:
	Inherits: ^Infantry
	Mobile:
		PauseOnCondition: disabled
	WithColoredOverlay@IDISABLE:
		RequiresCondition: disabled && !timestop
		Color: 00000067
	Targetable:
		RequiresCondition: !parachute
		TargetTypes: GroundActor, Cyborg, Disguise
	SpawnActorOnDeath@cube:
		Probability: 35
		Actor: helld4
		OwnerType: Killer
		DeathType: SpawnCubeDeath
		RequiresLobbyCreeps: false
	-SpawnActorOnDeath@fire:
	Explodes@fire:
		Weapon: TSInfExplode
		EmptyWeapon: TSInfExplode

^Soldier:
	TakeCover:
		SpeedModifier: 90
		Duration: 125
	EligibleForRandomActorCrate:
		Type: soldier

^TibSunSoldier:
	Inherits@1: ^Soldier
	RenderSprites:
	WithInfantryBody:
		IdleSequences: idle1,idle2
		StandSequences: stand
	DeathSounds@NORMAL:
		Voice: DieTS
	DeathSounds@ZAPPED:
		Voice: DieTS
	Explodes@tiberium:
		Weapon: TSInfExplode
		EmptyWeapon: TSInfExplode
		DeathTypes: TiberiumDeath

^NBOS:
	Inherits@1: ^Soldier
	DeathSounds@NORMAL:
		Voice: DieTS
	DeathSounds@ZAPPED:
		Voice: DieTS
	Explodes@fire:
		Weapon: TSInfExplode
		EmptyWeapon: TSInfExplode
		DeathTypes: FireDeath, TiberiumDeath
	Mobile:
		Locomotor: foot2
	-TakeCover:
	-Crushable:
	-SpawnActorOnDeath@fire:
	UpdatesPlayerStatistics:
		AddToArmyValue: true

^DoomSoldier:
	Inherits@1: ^Soldier
	DeathSounds@NORMAL:
		Voice: DieDoom
	DeathSounds@ZAPPED:
		Voice: DieDoom
	Explodes@fire:
		Weapon: TSInfExplode
		EmptyWeapon: TSInfExplode
		DeathTypes: FireDeath, TiberiumDeath
	Selectable:
		Bounds: 768, 938, 0, -469
		DecorationBounds: 682, 938, 0, -469
	-GrantConditionOnTerrain@tiberium:
	-TakeCover:
	TakeCover:
		SpeedModifier: 100
		DamageModifiers:
			Sniper75Percent: 75
		DamageTriggers: TriggerSniperProne
		Duration: 100
	RevealsShroud:
		MinRange: 4c0
		Range: 5c0
		RevealGeneratedShroud: False
	RevealsShroud@GAPGEN:
		Range: 4c0
	SoundOnDamageTransition:
		DamagedSounds: baud.aud, dsplpain2.aud

^HighHPInfantry:
	Targetable@highHP:
		TargetTypes: HighHPInfantry

^PlayableCivInfantry:
	Inherits: ^CivInfantry
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	MustBeDestroyed:
	-WithInfantryBody:
	WithFacingSpriteBody:
		-BodyOrientation:
	ClassicFacingBodyOrientation:
		QuantizedFacings: 8
	-BodyOrientation:
	WithMoveAnimation:
		MoveSequence: run
	WithDockingAnimation:
	Selectable:
		Priority: 5
	CashTrickler:
		Interval: 375
		Amount: 5
		ShowTicks: false
	Harvester:
		UnblockCell: 0,1
		Resources: Ore,Gems
		SearchFromProcRadius: 30
		SearchFromHarvesterRadius: 15
	MapEditorData:
		Categories: Infantry
	WithStoresResourcesPipsDecoration:
		Position: BottomLeft
		RequiresSelection: true
		PipCount: 1
	DockClientManager:
	StoresResources:
		Capacity: 1
		Resources: Ore,Gems

^PlayableCivBuilding:
	Inherits: ^Building
	Health:
		HP: 40000
	Armor:
		Type: Wood
	RevealsShroud:
		MinRange: 3c0
		Range: 4c0
		RevealGeneratedShroud: False
	RevealsShroud@GAPGEN:
		Range: 3c0
	-WithMakeAnimation:
	Capturable:
		-RequiresCondition:
		Types: building
	CapturableProgressBar:
	CapturableProgressBlink:
	Sellable:
		RequiresCondition: !being-captured && !being-demolished
		SellSounds: cashturn.aud
	-RepairableBuilding:
	-WithBuildingRepairDecoration:

^PlayableCivHouse:
	Inherits: ^PlayableCivBuilding
	Inherits@IDISABLE: ^DisableOnLowPower
	Valued:
		Cost: 500
	RallyPoint:
	Production:
		Produces: Infantry, Civilian
	PrimaryBuilding:
		PrimaryCondition: primary
		SelectionNotification: PrimaryBuildingSelected
	WithDecoration@primary:
		RequiresSelection: true
		Image: pips
		Sequence: tag-primary
		Position: Top
		RequiresCondition: primary
	StoresPlayerResources:
		Capacity: 500
	ProductionBar:
		ProductionType: Infantry
	Power:
		Amount: -10
	InstantlyRepairable:
	CashTrickler:
		Interval: 375
		Amount: 50
		ShowTicks: false
		RequiresCondition: !disabled
	ProvidesPrerequisite@civ:
		Factions: civ
		Prerequisite: infantry.civ
	ProvidesPrerequisite@house:
		Factions: civ
		Prerequisite: house
	InfiltrateForCash:
		Percentage: 50
		Types: SpyInfiltrate, ThiefInfiltrate
		InfiltratedNotification: CreditsStolen
	WithResourceStoragePipsDecoration:
		Position: BottomLeft
		RequiresSelection: true
		PipCount: 5
		FullSequence: pip-yellow

^PlayableCivHouseLarge:
	Inherits: ^PlayableCivHouse
	Building:
		Footprint: xx xx
		Dimensions: 2,2
	Exit@1:
		SpawnOffset: -42,810,0
		ExitCell: 1,2
	Exit@2:
		SpawnOffset: -725,640,0
		ExitCell: 0,2
	Refinery:
	FreeActor:
		Actor: c1.c
		SpawnOffset: 1,2
		Facing: 256
	DockHost:
		Type: Unload
		DockOffset: 512,1536,0

^PlayableCivHouseWide:
	Inherits: ^PlayableCivHouse
	Building:
		Footprint: xx
		Dimensions: 2,1
	Exit@1:
		SpawnOffset: -42,810,0
		ExitCell: 1,1
	Exit@2:
		SpawnOffset: -725,640,0
		ExitCell: 0,1
	Refinery:
	FreeActor:
		Actor: c3.c
		SpawnOffset: 1,1
		Facing: 256
	DockHost:
		Type: Unload
		DockOffset: 512,1024,0

^PlayableCivHouseTall:
	Inherits: ^PlayableCivHouse
	Building:
		Footprint: _ x
		Dimensions: 1,2
	Exit:
		SpawnOffset: -725,640,0
		ExitCell: 0,2
	Refinery:
	FreeActor:
		Actor: c5.c
		SpawnOffset: 1,2
		Facing: 256
	DockHost:
		Type: Unload
		DockOffset: 0,1536,0

^PlayableCivHouseSmall:
	Inherits: ^PlayableCivHouse
	Building:
		Footprint: x
		Dimensions: 1,1
	Exit:
		SpawnOffset: -725,640,0
		ExitCell: 0,1
	Refinery:
	FreeActor:
		Actor: c2.c
		SpawnOffset: 0,1
		Facing: 256
	DockHost:
		Type: Unload
		DockOffset: 0,1024,0

# Inherited and changed from mods/ra to add generic name if Tooltip is missing on newly defined actors. Also allows to be build on creep.
^BasicBuilding:
	Inherits@shape: ^1x1Shape
	Tooltip:
		Name: meta-basicbuilding-generic-name
		GenericName: meta-basicbuilding-generic-name
	Targetable@REPAIR:
		RequiresCondition: repairtime
		TargetTypes: StructureRepair
	GrantConditionOnDamageState@DAMAGED:
		Condition: repairtime
		ValidDamageStates: Light, Medium, Heavy, Critical
	SoundOnDamageTransition:
		DestroyedSounds: kaboom22.aud, crmble2.aud, dcrumble.aud
	CaptureNotification:
		LoseNotification: StructureLost
	Building:
		TerrainTypes: Clear,ClearSnow,Road,Creep,ClearSnow
		AllowPlacementOnResources: true
	ProximityExternalCondition@addons:
		Condition: kill_addon
		Range: 2c0
	Targetable@cloaked:
		RequiresCondition: cloaked
		TargetTypes: NoAITarget
	RequiresBuildableArea:
		Adjacent: 3

# Inherited and changed from mods/ra to add upgrade modifiers and numerous other buff/debuff modifiers from support powers
^Building:
	Inherits@MediConditions: ^MediConditionsB
	Inherits@corrode: ^CorrodesFromTibWeaps
	Inherits@shields: ^AcceptsShields
	Inherits@jshield: ^JapanBaseShield
	Inherits@holdtheline: ^USAHoldTheLine
	Inherits@japanbuffs_refinery: ^japanbuffs_refinery
	OwnerLostAction:
		Action: ChangeOwner
	Capturable:
		ValidRelationships: Enemy, Neutral, Ally
	ProductionTimeMultiplier@upgrade_time:
		Prerequisites: structures.prodtime
		Multiplier: 80
	ProductionCostMultiplier@upgrade_cost:
		Prerequisites: structures.prodcost
		Multiplier: 90
	ProductionTimeMultiplier@glapower: 
		Prerequisites: anypower, structures.gla
		Multiplier: 80
	RevealOnFire:
	ChangesHealth@plague:
		Delay: 3
	ChangesHealth@plaguenoshield:
		Delay: 3
	GrantConditionOnPrerequisite@bar1:
		Prerequisites: upgrade.buildarmor1
		Condition: bar1
	GrantConditionOnPrerequisite@bar2:
		Prerequisites: upgrade.buildarmor2
		Condition: bar2
	GrantConditionOnPrerequisite@bar3:
		Prerequisites: upgrade.buildarmor3
		Condition: bar3
	DamageMultiplier@bar1:
		RequiresCondition: bar1 && (!bar2 && !corrode && !defiler_plague)
		Modifier: 80
	DamageMultiplier@bar2:
		RequiresCondition: bar2 && (!bar3 && !corrode && !defiler_plague)
		Modifier: 60
	DamageMultiplier@bar3:
		RequiresCondition: bar3 && (!corrode && !defiler_plague)
		Modifier: 40
	SpawnActorsOnSell:
		Factions: england, germany, france, russia, ukraine, estonia, gdi, steel, zocom, gdi3, nod, marked, bhand, nod3, hitler, himmler, heydrich
	SpawnActorsOnSell@uac:
		Factions: phobos, mars, deimos
		ActorTypes: dm2,tecn,tecn,tecn,tecn
	SpawnActorsOnSell@fed:
		Factions: angels, silver, sword
		ActorTypes: fe1,fe1,fe1,tecn,tecn
	SpawnActorsOnSell@gla:
		Factions: demo, kassad, thrax
		ActorTypes: ge1,ge1,ge1,tecn,tecn
	SpawnActorsOnSell@forgotten:
		Factions: forgotten
		ActorTypes: frge1,frge1,frge1,tecn,tecn
	SpawnActorsOnSell@usa:
		Factions: usa, granger, townes, alexander
		ActorTypes: usaranger,usaranger,usaranger,tecn,tecn,tecn
	SpawnActorsOnSell@china:
		Factions: china, tank, infantry, nuke
		ActorTypes: chinaredguard2,chinaredguard2,chinaredguard2,tecn,tecn,tecn
	SpawnActorsOnSell@terran:
		Factions: terran, raynor, mengsk
		ActorTypes: tecn,tecn,tecn,c10,tmarine
	SpawnActorsOnSell@japan:
		Factions: japan, navy, mecha, economic
		ActorTypes: japanimperialwarrior,japanimperialwarrior,japanimperialwarrior,tecn,tecn,tecn
	SpawnActorsOnSell@medi:
		Factions: medi
		ActorTypes: usaranger
	SpawnActorsOnSell@avalon:
		Factions: avalon
		ActorTypes: avinf1,avinf1,avinf1,tecn
	ActorLostNotification:
		Notification: StructureLost
	GrantConditionOnPrerequisite@never_target_me:
		Prerequisites: never_target_me
		Condition: apply_no_target
	Targetable@no_target:
		RequiresCondition: apply_no_target
		TargetTypes: UpgradeThing
	Cloak@no_target:
		IsPlayerPalette: true
		Palette: dawncloak
		InitialDelay: 125
		CloakDelay: 175
		CloakSound: trans1.aud
		UncloakSound: trans1.aud
		UncloakOn: Damage
		RequiresCondition: apply_no_target
	RepairableBuilding:
		RequiresCondition: !defiler_plague
	GrantConditionOnPrerequisite@sovietiron:
		Prerequisites: soviet.iron
		Condition: soviet_iron
	GrantConditionOnPrerequisite@terranarmor:
		Prerequisites: terran.structure
		Condition: soviet_iron
	GrantConditionOnPrerequisite@zagarafortress:
		Prerequisites: zagara.tier5.fortress
		Condition: zagara_fortress
	DamageMultiplier@sovietiron:
		RequiresCondition: soviet_iron || zagara_fortress
		Modifier: 80
	GrantConditionOnPrerequisite@gapgen1:
		Prerequisites: ulttech.france
		Condition: ulttech.france
	GrantConditionOnPrerequisite@gapgen2:
		Prerequisites: ulttech.heydrich
		Condition: ulttech.france
	CreatesShroud:
		Range: 5c0
		RequiresCondition: !disabled && (ulttech.france || nearbygap)
	ExternalCondition@nearbygap:
		Condition: nearbygap
	ProximityExternalCondition@nearbygap:
		RequiresCondition: ulttech.france
		Condition: nearbygap
		Range: 5c0
	GrantConditionIfOwnerIsNeutral:
		Condition: no_owner
	PowerMultiplier@neutral:
		RequiresCondition: no_owner
		Modifier: 0
	Demolishable:
		Condition: emp_shields
	WithIdleOverlay@akuma:
		Image: akuma-overlay
		Sequence: akuma-building
		Palette: effect
		RequiresCondition: akuma
		IsDecoration: True
	GrantConditionOnPrerequisite@service1:
		Prerequisites: upgrade.buildrepair1
		Condition: brep1
	GrantConditionOnPrerequisite@service2:
		Prerequisites: upgrade.buildrepair2
		Condition: brep2
	GrantConditionOnPrerequisite@service3:
		Prerequisites: upgrade.buildrepair3
		Condition: brep3
	ChangesHealth@service1:
		PercentageStep: 1
		Delay: 75
		StartIfBelow: 100
		DamageCooldown: 500
		RequiresCondition: brep1
	ChangesHealth@service2:
		PercentageStep: 1
		Delay: 125
		StartIfBelow: 100
		DamageCooldown: 500
		RequiresCondition: brep2
	ChangesHealth@service3:
		PercentageStep: 1
		Delay: 175
		StartIfBelow: 100
		DamageCooldown: 500
		RequiresCondition: brep3
	GrantCondition@service:
		RequiresCondition: brep1 && repairtime
		Condition: wrench
	WithDecoration@service:
		Image: pips
		Sequence: wrench
		Position: BottomLeft
		Margin: 8, 8
		RequiresCondition: wrench && !damage-cooldown
		BlinkInterval: 35
		BlinkPattern: Off, On
	GrantConditionOnDamage@service: 
		Condition: damage-cooldown
		ValidRelationships: Ally, Enemy, Neutral
		Duration: 500
	-GrantConditionOnPrerequisite@fedshields:

^ScienceBuilding:
	SpawnActorsOnSell:
		Factions: england, germany, france, russia, ukraine, estonia, gdi, steel, zocom, gdi3, nod, marked, bhand, nod3, hitler, himmler, heydrich
	SpawnActorsOnSell@uac:
		Factions: phobos, mars, deimos
		ActorTypes: dm2,dm2,dm2,dm2,tecn,tecn2,tecn,tecn2,tecn,tecn2,tecn,tecn2,tecn,tecn2,e6,e6,e6,c10,c10,c10,c10
	SpawnActorsOnSell@fed:
		Factions: angels, silver, sword
		ActorTypes: fe1,fe1,fe1,fe1,tecn,tecn2,tecn,tecn2,tecn,tecn2,tecn,tecn2,tecn,tecn2,fe6,fe6,fe6,c10,c10,c10,c10
	SpawnActorsOnSell@gla:
		Factions: demo, kassad, thrax
		ActorTypes: ge1,ge1,ge1,ge1,tecn,tecn2,tecn,tecn2,tecn,tecn2,tecn,tecn2,tecn,tecn2,gharv,gharv,gharv,c10,c10,c10,c10
	SpawnActorsOnSell@usa:
		Factions: usa, granger, alexander, townes
		ActorTypes: usaranger,usaranger,usaranger,usaranger,usaranger,tecn,tecn2,tecn,tecn2,tecn,tecn2,tecn,tecn2,tecn,tecn2,e6,e6,e6,c10,c10,c10,c10
	SpawnActorsOnSell@china:
		Factions: china, tank, infantry, nuke
		ActorTypes: chinaredguard2,chinaredguard2,chinaredguard2,chinaredguard2,tecn,tecn2,tecn,tecn2,tecn,tecn2,tecn,tecn2,tecn,tecn2,e6,e6,e6,c10,c10,c10,c10
	SpawnActorsOnSell@japan:
		Factions: japan, navy, mecha, economic
		ActorTypes: japanimperialwarrior,japanimperialwarrior,japanimperialwarrior,japanimperialwarrior,tecn,tecn2,tecn,tecn2,tecn,tecn2,tecn,tecn2,tecn,tecn2,e6,e6,e6,c10,c10,c10,c10
	SpawnActorsOnSell@avalon:
		Factions: avalon
		ActorTypes: avinf1,avinf1,avinf1,c10,c10,c10,c10,tecn,tecn2,tecn,tecn2,tecn,tecn2,tecn,tecn2,tecn,tecn2
	SpawnActorsOnSell@forgotten:
		Factions: forgotten
		ActorTypes: frge1,frge1,frge1,frge1,c10,c10,c10,c10,tecn,tecn2,tecn,tecn2,tecn,tecn2,tecn,tecn2,tecn,tecn2,frge6,frge6,frge6
	SpawnActorsOnSell@medi:
		Factions: medi
		ActorTypes: usaranger
	Targetable@tech:
		TargetTypes: Tech

^Superweapon:
	Targetable@superweapon:
		TargetTypes: Superweapon

^Defense:
	Inherits@MediConditions: ^MediConditionsD
	Inherits@usabombardment: ^USAStrategyBuffs
	Inherits@propagandaboost: ^propagandaboost
	Inherits@japanbuffs_buildings: ^japanbuffs_buildings
	Building:
		Footprint: +
	GivesBuildableArea:
		AreaTypes: building, fake, defense
	GrantConditionOnPrerequisite@bfp1:
		Prerequisites: upgrade.buildfirepower1
		Condition: bfp1
	GrantConditionOnPrerequisite@bfp2:
		Prerequisites: upgrade.buildfirepower2
		Condition: bfp2
	GrantConditionOnPrerequisite@bfp3:
		Prerequisites: upgrade.buildfirepower3
		Condition: bfp3
	FirepowerMultiplier@bfp1:
		RequiresCondition: bfp1 && !bfp2
		Modifier: 114
	FirepowerMultiplier@bfp2:
		RequiresCondition: bfp2 && !bfp3
		Modifier: 128
	FirepowerMultiplier@bfp3:
		RequiresCondition: bfp3
		Modifier: 142
	GrantConditionOnPrerequisite@commcentre:
		Prerequisites: miss
		Condition: missboost
	RevealsShroudMultiplier@commcentre:
		RequiresCondition: missboost
		Modifier: 120
	ProximityExternalCondition@addons:
		Condition: kill_addon
		Range: 1c512
	GrantConditionOnPrerequisite@alliesupgrade:
		Prerequisites: allies.training1
		Condition: allies_training
	RevealsShroudMultiplier@alliesupgrade:
		RequiresCondition: allies_training || upgrade_range1
		Modifier: 110
	RangeMultiplier@alliesupgrade:
		RequiresCondition: allies_training || upgrade_range1
		Modifier: 110
	DetectCloakedMultiplier@alliesupgrade:
		RequiresCondition: allies_training || upgrade_range1
		Modifier: 110
	GrantConditionOnPrerequisite@attackrange1:
		Prerequisites: building.attackrange1
		Condition: upgrade_range1
	FirepowerMultiplier@zagarafortress:
		RequiresCondition: zagara_fortress
		Modifier: 120
	Targetable@cloaked:
		RequiresCondition: cloaked
		TargetTypes: NoAITarget

^BuildingPlug:
	Interactable:
	AlwaysVisible:
	Building:
		BuildSounds: placbldg.aud, build5.aud
		UndeploySounds: cashturn.aud
		AllowInvalidPlacement: true
	SequencePlaceBuildingPreview:
		SequenceAlpha: 0.65
		Sequence: idle
		FootprintAlpha: 0.7
	KillsSelf:
		RemoveInstead: true
	RenderSprites:

^GLAVehicle:
	GrantConditionOnPrerequisite@service:
		Prerequisites: gfix
		Condition: glavehicle
	GrantConditionOnPrerequisite@garage:
		Prerequisites: weapgarage
		Condition: glavehicle
	ChangesHealth@service:
		PercentageStep: 1
		Delay: 50
		StartIfBelow: 100
		DamageCooldown: 250
		RequiresCondition: glavehicle
	GrantCondition@service:
		RequiresCondition: glavehicle && damaged
		Condition: wrench
	WithDecoration@service:
		Image: pips
		Sequence: wrench
		Position: BottomLeft
		Margin: 8, 8
		RequiresCondition: wrench && !damage-cooldown
		BlinkInterval: 35
		BlinkPattern: Off, On
	GrantConditionOnDamage@service: 
		Condition: damage-cooldown
		ValidRelationships: Ally, Enemy, Neutral
		Duration: 250

^Vehicle:
	Inherits@MediConditions: ^MediConditionsV
	Inherits@corrode: ^CorrodesFromTibWeaps
	Inherits@aeiou: ^AEIOUBoosted
	Inherits@glavehicle: ^GLAVehicle # self healing for GLA owned vehicles
	Inherits@gps: ^GPSScramblable
	Inherits@advancedtraining: ^AdvancedTraining
	Inherits@usabombardment: ^USAStrategyBuffs
	Inherits@propagandaboost: ^propagandaboost
	Inherits@frenzyboost: ^FrenzyBoost
	Inherits@shields: ^AcceptsShields
	Inherits@japanbuffs_buildings: ^japanbuffs_buildings
	OwnerLostAction:
		Action: ChangeOwner
		Owner: Creeps
	RevealOnFire:
	Repairable:
		RepairActors: fix, gfix, gfix.boss, tshop
	Tooltip:
		Name: meta-vehicle-generic-name
		GenericName: meta-vehicle-generic-name
	ProductionCostMultiplier@upgrade1:
		Prerequisites: vehicle.prodcost
		Multiplier: 90
	ProductionTimeMultiplier@upgrade1:
		Prerequisites: vehicle.prodtime
		Multiplier: 80
	ProductionCostMultiplier@upgrade2:
		Prerequisites: vehicle.prodcost2
		Multiplier: 90
	ProductionTimeMultiplier@upgrade2:
		Prerequisites: vehicle.prodtime2
		Multiplier: 80
	ProductionTimeMultiplier@glapower: 
		Prerequisites: anypower, vehicles.gla
		Multiplier: 80
	GrantConditionOnPrerequisite@var1:
		Prerequisites: upgrade.veharmor1
		Condition: var1
	GrantConditionOnPrerequisite@var2:
		Prerequisites: upgrade.veharmor2
		Condition: var2
	GrantConditionOnPrerequisite@var3:
		Prerequisites: upgrade.veharmor3
		Condition: var3
	GrantConditionOnPrerequisite@vfp1:
		Prerequisites: upgrade.vehfirepower1
		Condition: vfp1
	GrantConditionOnPrerequisite@vp2:
		Prerequisites: upgrade.vehfirepower2
		Condition: vfp2
	GrantConditionOnPrerequisite@vfp3:
		Prerequisites: upgrade.vehfirepower3
		Condition: vfp3
	DamageMultiplier@var1:
		RequiresCondition: var1 && (!var2 && !corrode && !defiler_plague)
		Modifier: 85
	DamageMultiplier@var2:
		RequiresCondition: var2 && (!var3 && !corrode && !defiler_plague)
		Modifier: 70
	DamageMultiplier@var3:
		RequiresCondition: var3 && (!corrode && !defiler_plague)
		Modifier: 55
	FirepowerMultiplier@vfp1:
		RequiresCondition: vfp1 && !vfp2
		Modifier: 115
	FirepowerMultiplier@vfp2:
		RequiresCondition: vfp2 && !vfp3
		Modifier: 130
	FirepowerMultiplier@vfp3:
		RequiresCondition: vfp3
		Modifier: 145
	Targetable@parachute:
		RequiresCondition: parachute
		TargetTypes: AirborneActor
	SpeedMultiplier@disabled:
		RequiresCondition: disabled
		Modifier: 0
	Passenger:
		Weight: 2
	Mobile:
		PauseOnCondition: being-captured || disabled
	WithColoredOverlay@IDISABLE:
		RequiresCondition: disabled && !timestop
		Color: 0000007B
	WithDecoration@POWERDOWN:
		Image: poweroff
		Sequence: offline
		Palette: chrome
		RequiresCondition: disabled && !timestop
		Position: Center
	ExternalCondition@garageboost:
		Condition: garageboost
	SpeedMultiplier@garagepeedboost:
		RequiresCondition: garageboost
		Modifier: 140
	ReloadDelayMultiplier@garagereloadboost:
		RequiresCondition: garageboost
		Modifier: 75
	DamageMultiplier@garagedefenseboost:
		RequiresCondition: garageboost
		Modifier: 75
	ChangesHealth@garagerepair:
		PercentageStep: 1
		Delay: 100
		StartIfBelow: 100
		DamageCooldown: 125
		RequiresCondition: garageboost
	ChangesHealth@aeiouboost:
		RequiresCondition: aeiouboost
		PercentageStep: 1
		Delay: 75
		StartIfBelow: 70
		DamageCooldown: 100
	ChangesHealth@radiation:
		RequiresCondition: standing_in_radiation && !gdi_suits
		Step: -400
		Delay: 8
		StartIfBelow: 101
	GrantConditionOnTerrain@radiation:
		Condition: standing_in_radiation
		TerrainTypes: Radiation
	SpawnActorOnDeath@cube:
		Probability: 40
		Actor: helld4
		OwnerType: Killer
		DeathType: SpawnCubeDeath
		RequiresLobbyCreeps: false
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	ExternalCondition@fixsell:
		Condition: fixsell
	Sellable@fixsell:
		RequiresCondition: fixsell
		SellSounds: unitsld1.aud, cashturn.aud
	SpawnActorsOnSell:
		Factions: england, germany, france, russia, ukraine, estonia, steel, zocom, gdi3, marked, bhand, nod3, hitler, himmler, heydrich
		ActorTypes: e1,e1,e1,tecn
	SpawnActorsOnSell@uac:
		Factions: phobos, mars, deimos
		ActorTypes: dm2,tecn,tecn
	SpawnActorsOnSell@fed:
		Factions: angels, silver, sword
		ActorTypes: fe1,fe1,fe1,tecn
	SpawnActorsOnSell@gla:
		Factions: demo, kassad, thrax
		ActorTypes: ge1,ge1,ge1,tecn
	SpawnActorsOnSell@usa:
		Factions: usa, townes, granger, alexander
		ActorTypes: usaranger,usaranger,usaranger,tecn
	SpawnActorsOnSell@china:
		Factions: china, nuke, tank, infantry
		ActorTypes: chinaredguard2,chinaredguard2,chinaredguard2,tecn
	SpawnActorsOnSell@japan:
		Factions: japan
		ActorTypes: japanimperialwarrior,japanimperialwarrior,japanimperialwarrior,tecn
	SpawnActorsOnSell@avalon:
		Factions: avalon
		ActorTypes: avinf1,avinf1,avinf1
	Targetable@cloaked:
		RequiresCondition: cloaked
		TargetTypes: NoAITarget
	GrantConditionOnPrerequisite@terranarmor:
		Prerequisites: terran.armor
		Condition: soviet_iron
	DamageMultiplier@sovietiron:
		RequiresCondition: soviet_iron
		Modifier: 80
	TeleportNetworkTransportable:
	EligibleForRandomActorCrate:
		Type: vehicle
	Targetable@REPAIR:
		RequiresCondition: damaged
		TargetTypes: Repair
	ExternalCondition@wander:
		Condition: wander
	Wanders@default:
		RequiresCondition: wander

^TrackedVehicle:
	GrantConditionOnPrerequisite@gdi_speed:
		Prerequisites: gdi.speed
		Condition: gdi_speed
	SpeedMultiplier@gdi_speed:
		RequiresCondition: gdi_speed
		Modifier: 120
	GrantConditionOnPrerequisite@sovietiron:
		Prerequisites: soviet.iron
		Condition: soviet_iron

^Ship:
	Inherits@corrode: ^CorrodesFromTibWeaps
	Inherits@GPS: ^GPSScramblable
	Inherits@advancedtraining: ^AdvancedTraining
	Inherits@usabombardment: ^USAStrategyBuffs
	Inherits@propagandaboost: ^propagandaboost
	Inherits@frenzyboost: ^FrenzyBoost
	Inherits@shields: ^AcceptsShields
	Inherits@japanbuffs_buildings: ^japanbuffs_buildings
	RepairableNear:
		RepairActors: spen, syrd, gspen, usashipyard, chinashipyard, japanshipyard, japanshipyardnavy
	RevealOnFire:
	Tooltip:
		Name: meta-ship-generic-name
		GenericName: meta-ship-generic-name
	ProductionCostMultiplier@upgrade1:
		Prerequisites: ships.prodcost
		Multiplier: 90
	ProductionTimeMultiplier@upgrade1:
		Prerequisites: ships.prodtime
		Multiplier: 80
	ProductionCostMultiplier@upgrade2:
		Prerequisites: ships.prodcost2
		Multiplier: 90
	ProductionTimeMultiplier@upgrade2:
		Prerequisites: ships.prodtime2
		Multiplier: 80
	ProductionTimeMultiplier@glapower: 
		Prerequisites: anypower, ships.gla
		Multiplier: 80
	GrantConditionOnPrerequisite@nar1:
		Prerequisites: upgrade.navarmor1
		Condition: nar1
	GrantConditionOnPrerequisite@nar2:
		Prerequisites: upgrade.navarmor2
		Condition: nar2
	GrantConditionOnPrerequisite@nar3:
		Prerequisites: upgrade.navarmor3
		Condition: nar3
	GrantConditionOnPrerequisite@nfp1:
		Prerequisites: upgrade.navfirepower1
		Condition: nfp1
	GrantConditionOnPrerequisite@nfp2:
		Prerequisites: upgrade.navfirepower2
		Condition: nfp2
	GrantConditionOnPrerequisite@nfp3:
		Prerequisites: upgrade.navfirepower3
		Condition: nfp3
	DamageMultiplier@nar1:
		RequiresCondition: nar1 && (!nar2 && !corrode && !defiler_plague)
		Modifier: 85
	DamageMultiplier@nar2:
		RequiresCondition: nar2 && (!nar3 && !corrode && !defiler_plague)
		Modifier: 70
	DamageMultiplier@nar3:
		RequiresCondition: nar3 && (!corrode && !defiler_plague)
		Modifier: 55
	FirepowerMultiplier@nfp1:
		RequiresCondition: nfp1 && !nfp2
		Modifier: 115
	FirepowerMultiplier@nfp2:
		RequiresCondition: nfp2 && !nfp3
		Modifier: 130
	FirepowerMultiplier@nfp3:
		RequiresCondition: nfp3
		Modifier: 145
	Mobile:
		PauseOnCondition: disabled
	WithColoredOverlay@IDISABLE:
		RequiresCondition: disabled
		Color: 000000B4
	ExternalCondition@fixsell:
		Condition: fixsell
	Sellable@fixsell:
		RequiresCondition: fixsell
		SellSounds: UnitSold
	TemporaryOwnerManager:

# Inherited and changed from mods/ra to add upgrade modifiers and numerous other buff/debuff modifiers from support powers
# Also adds additional/cross faction rearm structures and a generic name in case a newly defined actor does not have Tooltip/name
^NeutralPlane:
	Inherits@corrode: ^CorrodesFromTibWeaps
	Inherits@GPS: ^GPSScramblable
	Inherits@advancedtraining: ^AdvancedTraining
	Inherits@usabombardment: ^USAStrategyBuffs
	Inherits@propagandaboost: ^propagandaboost
	Inherits@frenzyboost: ^FrenzyBoost
	Inherits@shields: ^AcceptsShields
	Repairable:
		RepairActors: fix, gfix, gfix.boss, tshop
	RevealOnFire:
	Tooltip:
		Name: meta-neutralplane-generic-name
		GenericName: meta-neutralplane-generic-name
	ProductionCostMultiplier@upgrade1:
		Prerequisites: aircraft.prodcost
		Multiplier: 90
	ProductionTimeMultiplier@upgrade1:
		Prerequisites: aircraft.prodtime
		Multiplier: 80
	ProductionCostMultiplier@upgrade2:
		Prerequisites: aircraft.prodcost2
		Multiplier: 90
	ProductionTimeMultiplier@upgrade2:
		Prerequisites: aircraft.prodtime2
		Multiplier: 80
	ProductionTimeMultiplier@glapower: 
		Prerequisites: anypower, aircraft.gla
		Multiplier: 80
	GrantConditionOnPrerequisite@aar1:
		Prerequisites: upgrade.airarmor1
		Condition: aar1
	GrantConditionOnPrerequisite@aar2:
		Prerequisites: upgrade.airarmor2
		Condition: aar2
	GrantConditionOnPrerequisite@aar3:
		Prerequisites: upgrade.airarmor3
		Condition: aar3
	GrantConditionOnPrerequisite@afp1:
		Prerequisites: upgrade.airfirepower1
		Condition: afp1
	GrantConditionOnPrerequisite@afp2:
		Prerequisites: upgrade.airfirepower2
		Condition: afp2
	GrantConditionOnPrerequisite@afp3:
		Prerequisites: upgrade.airfirepower3
		Condition: afp3
	DamageMultiplier@aar1:
		RequiresCondition: aar1 && !aar2
		Modifier: 82
	DamageMultiplier@nar2:
		RequiresCondition: aar2 && !aar3
		Modifier: 64
	DamageMultiplier@nar3:
		RequiresCondition: aar3
		Modifier: 48
	FirepowerMultiplier@nfp1:
		RequiresCondition: afp1 && !afp2
		Modifier: 115
	FirepowerMultiplier@nfp2:
		RequiresCondition: afp2 && !afp3
		Modifier: 130
	FirepowerMultiplier@nfp3:
		RequiresCondition: afp3
		Modifier: 145
	GrantConditionOnPrerequisite@terranarmor:
		Prerequisites: terran.armor
		Condition: terran_armor
	DamageMultiplier@terranarmor:
		RequiresCondition: terran_armor
		Modifier: 75
	Aircraft:
	KillsSelf:
		RequiresCondition: airborne && disabled
	Targetable@REPAIR:
		RequiresCondition: damaged
		TargetTypes: Repair
	ExternalCondition@reloadnear:
		Condition: reloadnear
	GrantConditionOnPrerequisite@bot:
		Prerequisites: ai.all
		Condition: botowner
	AmmoPool:
	ReloadAmmoPool@bot:
		RequiresCondition: botowner && !attack-cooldown
		Delay: 1500
		Count: 90
	ReloadAmmoPool@reloadnear:
		RequiresCondition: reloadnear
		Delay: 125
		Count: 2
	GrantConditionOnAttack@botcooldown:
		Condition: attack-cooldown
		RevokeDelay: 125
	TemporaryOwnerManager:
	ExternalCondition@arbiterstealth:
		Condition: arbiterstealth
	Cloak@arbiterstealth:
		IsPlayerPalette: true
		InitialDelay: 25
		CloakDelay: 25
		CloakSound: tphclo00.aud
		UncloakSound: tphclo01.aud
		RequiresCondition: arbiterstealth && !disabled
		UncloakOn: Attack, Unload, Infiltrate, Demolish
	GrantConditionOnPrerequisite@gdi_speed:
		Prerequisites: gdi.speed
		Condition: gdi_speed
	SpeedMultiplier@gdi_speed:
		RequiresCondition: gdi_speed
		Modifier: 120
	GrantConditionOnPrerequisite@sovietiron:
		Prerequisites: soviet.iron
		Condition: soviet_iron
	DamageMultiplier@sovietiron:
		RequiresCondition: soviet_iron
		Modifier: 75
	Rearmable:
		RearmActors: hpad, hpad.bot, afld, afld.ukraine, usaairfield, usaairstriplandingspot, chinaairfield, japanairfield, japanairfieldnavy, pstarg, tsport, tsport.landed, zspire, zspire.spot, avpad

# This gives planes a passive, slow repair when landed.
^Plane:
	ChangesHealth@landed:
		PercentageStep: 1
		Delay: 25
		StartIfBelow: 100
		DamageCooldown: 50
		RequiresCondition: !airborne

# Inherited and changed from mods/ra to add a generic name if one was not defined in a new actorn, changes landable terrain and repair buildings.
^Helicopter:
	-ChangesHealth@landed:
	Tooltip:
		Name: meta-helicopter-generic-name
		GenericName: meta-helicopter-generic-name
	Aircraft:
		LandableTerrainTypes: Clear, ClearSnow, Rough, Road, Ore, Beach, Gems, Creep, Tiberium, BlueTiberium
	Repairable:
		RepairActors: fix, gfix, gfix.boss, tshop

# These are for voxel planes
^TSPlane:
	Inherits: ^Plane
	ClassicFacingBodyOrientation:
		QuantizedFacings: 32
	-BodyOrientation:
	-WithFacingSpriteBody:
	-QuantizeFacingsFromSequence:
	-WithShadow:
	RenderSprites:
	RenderVoxels:
		PlayerPalette: tsunit
		Scale: 9
	WithVoxelBody:
	Cloak@stealthgen:
		Palette: tscloak
	-ChangesHealth@landed:
	-WithColoredOverlay@shielded:

^TSHelicopter:
	Inherits: ^Helicopter
	ClassicFacingBodyOrientation:
		QuantizedFacings: 32
	-WithFacingSpriteBody:
	-QuantizeFacingsFromSequence:
	-WithShadow:
	RenderSprites:
	RenderVoxels:
		PlayerPalette: tsunit
		Scale: 9
	WithVoxelBody:
	Cloak@stealthgen:
		Palette: tscloak
	-WithColoredOverlay@shielded:

^TSNeutralPlane:
	Inherits: ^NeutralPlane
	ClassicFacingBodyOrientation:
		QuantizedFacings: 32
	-BodyOrientation:
	-WithFacingSpriteBody:
	-QuantizeFacingsFromSequence:
	-WithShadow:
	RenderSprites:
	RenderVoxels:
		PlayerPalette: tsunit
		Scale: 9
	WithVoxelBody:
	Cloak@stealthgen:
		Palette: tscloak
	-WithColoredOverlay@shielded:

^TSPlaneHusk:
	Inherits: ^PlaneHusk
	ClassicFacingBodyOrientation:
		QuantizedFacings: 32
	-BodyOrientation:
	-WithFacingSpriteBody:
	-QuantizeFacingsFromSequence:
	-WithShadow:
	RenderSprites:
	RenderVoxels:
		PlayerPalette: tsunit
		Scale: 9
	WithVoxelBody:
	FallsToEarth:
		Velocity: 112

# This is used for the Terran buildings that can lift off
^FlyingBuilding:
	Inherits@1: ^ExistsInWorld
	Inherits@2: ^IronCurtainable
	Inherits@4: ^SpriteActor
	Inherits@shape: ^1x1Shape
	Inherits@bounty: ^GlobalBounty
	Inherits@selection: ^SelectableBuilding
	Inherits@handicaps: ^PlayerHandicaps
	Inherits@corrode: ^CorrodesFromTibWeaps
	Huntable:
	OwnerLostAction:
		Action: Kill
	Armor:
		Type: Wood
	UpdatesPlayerStatistics:
	AppearsOnRadar:
		UseLocation: true
	Selectable:
		Bounds: 1024, 1024
	Aircraft:
		TakeoffSounds: liftoff.aud
		LandingSounds: land.aud
		AirborneCondition: airborne
		Speed: 24
		CanHover: True
		CanSlide: True
		CruisingCondition: cruising
		LandableTerrainTypes: Clear, ClearSnow, Road, Creep
		Crushes: crate, mine, infantry
		VTOL: true
	Targetable@GROUND:
		TargetTypes: GroundActor, Structure, C4, DetonateAttack
	Targetable@REPAIR:
		RequiresCondition: damaged
		TargetTypes: Repair
	GrantConditionOnDamageState@DAMAGED:
		Condition: damaged
		ValidDamageStates: Light, Medium, Heavy, Critical
	Guardable:
		Range: 3c0
	ActorLostNotification:
		Notification: StructureLost
		TextNotification: meta-flyingbuilding.actorlostnotification-text-notification
	ProximityCaptor:
		Types: Building
	EjectOnDeath:
		PilotActor: tecn
		SuccessRate: 50
		EjectOnGround: false
		EjectInAir: true
		AllowUnsuitableCell: true
		ChuteSound: chute1.aud
	HiddenUnderFog:
		Type: GroundPosition
	GpsDot:
		String: Structure
	Tooltip:
		GenericName: meta-flyingbuilding.generic-name
	WithShadow:
		Offset: 43, 128, 0
		ZOffset: -129
	WithSpriteBody:
		Sequence: idle-air
		StartSequence: lift
	MustBeDestroyed:
		RequiredForShortGame: true
	MapEditorData:
		Categories: Building
	SpawnActorOnDeath:
		RequiresCondition: airborne
	Explodes:
		Weapon: UnitExplode
	WithMakeAnimation:
		Condition: build-incomplete
		Sequence: lift
	CaptureManager:
		BeingCapturedCondition: being-captured
	Capturable:
		RequiresCondition: !build-incomplete
		Types: building
	CaptureNotification:
		TextNotification: meta-flyingbuilding.capturenotification-text-notification
	RepairableBuilding:
		RepairStep: 250
		PlayerExperience: 2
		RepairingNotification: Repairing
	WithBuildingRepairDecoration:
		Image: allyrepair
		Sequence: repair
		Position: Center
		Palette: player
		IsPlayerPalette: True
	Demolishable:
		Condition: being-demolished
	AmbientSound@airborne:
		SoundFiles: liftoff.aud
		Interval: -1
		Delay: 1
		RequiresCondition: airborne
	SoundOnDamageTransition:
		DamagedSounds: kaboom1.aud
		DestroyedSounds: kaboom22.aud, crmble2.aud, dcrumble.aud
	GrantConditionOnPrerequisite@bar1:
		Prerequisites: upgrade.buildarmor1
		Condition: bar1
	GrantConditionOnPrerequisite@bar2:
		Prerequisites: upgrade.buildarmor2
		Condition: bar2
	GrantConditionOnPrerequisite@bar3:
		Prerequisites: upgrade.buildarmor3
		Condition: bar3
	DamageMultiplier@bar1:
		RequiresCondition: bar1 && (!bar2 && !corrode && !defiler_plague)
		Modifier: 80
	DamageMultiplier@bar2:
		RequiresCondition: bar2 && (!bar3 && !corrode && !defiler_plague)
		Modifier: 60
	DamageMultiplier@bar3:
		RequiresCondition: bar3 && (!corrode && !defiler_plague)
		Modifier: 40

# Default actor type for the Viceroid. 
# Anything that would inherit from this will be tiberium immune and not auto targetable for 10 seconds upon spawning
^Viceroid:
	Inherits@1: ^ExistsInWorld
	Inherits@2: ^SpriteActor
	Inherits@AUTOTARGET: ^AutoTargetGroundAssaultMove
	Inherits@selection: ^SelectableCombatUnit
	Huntable:
	Health:
		HP: 30000
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 6c0
	Mobile:
		Voice: Move
		Speed: 71
		Locomotor: wheeled
	SelectionDecorations:
	WithSpriteControlGroupDecoration:
	Selectable:
		Bounds: 1024, 1024
	Targetable:
		TargetTypes: GroundActor, Vehicle
	Targetable@noauto:
		RequiresCondition: spawned
		TargetTypes: NoAutoTarget
	GrantTimedCondition:
		Condition: spawned
		Duration: 250
	AutoTarget:
		ScanRadius: 5
	AttackMove:
		Voice: Attack
	DrawLineToTarget:
	HiddenUnderFog:
	Valued:
		Cost: 1000
	Tooltip:
		Name: meta-viceroid-name
	Armament:
		Weapon: Chemspray
		LocalOffset: 384,0,0
	AttackFrontal:
		Voice: Attack
		FacingTolerance: 0
	ClassicFacingBodyOrientation:
		QuantizedFacings: 8
	-BodyOrientation:
	WithSpriteBody:
	WithMuzzleOverlay:
	Guard:
		Voice: Move
	Guardable:
	ChangesHealth@tiberium:
		RequiresCondition: standing_in_tiberium
		DamageTypes: TiberiumDeath
		Step: 100
		Delay: 4
		StartIfBelow: 101
	GrantConditionOnTerrain@tiberium:
		Condition: standing_in_tiberium
		TerrainTypes: Tiberium, BlueTiberium, Radiation
	Voiced:
		VoiceSet: AntVoice
	HitShape:
		Type: Circle
			Radius: 427
	MapEditorData:
		Categories: Critter
	ExternalCondition@corrode:
		Condition: corrode
	DamageMultiplier@corrode:
		RequiresCondition: corrode
		Modifier: 75
	WithColoredOverlay@corrode:
		RequiresCondition: corrode
		Color: 00800040
	RenderSprites:
		PlayerPalette: dawn
	Explodes:
		Weapon: TiberiumExplosion
		EmptyWeapon: TiberiumExplosion

# This sets a number of default properties for Epic Units, and nerfs rank up modifiers:
# Build duration, Epic unit skull decoration, announce to players when seen, GPS dot, nerf to AEIOU booster
# TargetType for EpicUnit which is used for AI superweapon consideration, and mind control nerf
^EpicUnit:
	Inherits@GAINSEXPERIENCE: ^GainsExperience
	Buildable:
		BuildDuration: 10000
		BuildDurationModifier: 55
		BuildLimit: 1
	AnnounceOnSeen:
		PingRadar: True
		Notification: EnemyUnitsApproaching
	ExternalCondition@PRODUCED:
		Condition: produced
	VoiceAnnouncement:
		RequiresCondition: produced
		Voice: Build
	WithDecoration@elite:
		Image: pips
		Sequence: pip-poison
		Palette: effect
		ValidRelationships: None,Neutral,Enemy,Ally
	GpsDot:
		String: Biohazard
	Cloneable:
		Types: Epic
	ChangesHealth@aeiouboost:
		RequiresCondition: aeiouboost
		PercentageStep: 1
		Delay: 75
		StartIfBelow: 70
		DamageCooldown: 100
	Targetable@epic1:
		TargetTypes: EpicUnit
	GainsExperience:
	DamageMultiplier@RANK-1:
		Modifier: 98
	DamageMultiplier@RANK-2:
		Modifier: 96
	DamageMultiplier@RANK-3:
		Modifier: 93
	DamageMultiplier@RANK-ELITE:
		Modifier: 90
	FirepowerMultiplier@RANK-1:
		Modifier: 102
	FirepowerMultiplier@RANK-2:
		Modifier: 105
	FirepowerMultiplier@RANK-3:
		Modifier: 107
	FirepowerMultiplier@RANK-ELITE:
		Modifier: 110
	SpeedMultiplier@RANK-1:
		Modifier: 102
	SpeedMultiplier@RANK-2:
		Modifier: 104
	SpeedMultiplier@RANK-3:
		Modifier: 107
	SpeedMultiplier@RANK-ELITE:
		Modifier: 110
	ReloadDelayMultiplier@RANK-1:
		Modifier: 98
	ReloadDelayMultiplier@RANK-2:
		Modifier: 96
	ReloadDelayMultiplier@RANK-3:
		Modifier: 93
	ReloadDelayMultiplier@RANK-ELITE:
		Modifier: 90
	ChangesHealth@ELITE:
		PercentageStep: 1
		Delay: 125
		DamageCooldown: 250
	GainsExperienceMultiplier@epicunit:
		Modifier: 33
	DamageMultiplier@defmatrix:
		RequiresCondition: defense_matrix_up
		Modifier: 110
	ExternalCondition@mind:
		Condition: mindcontrolresist
	DamageMultiplier@mind:
		RequiresCondition: mindcontrolresist
		Modifier: 25
	FirepowerMultiplier@mind:
		RequiresCondition: mindcontrolresist
		Modifier: 50
	EligibleForRandomActorCrate:
		Type: epic

# Reduces upgrade effectiveness on VERY strong epic infantry units
^EpicInfantryNerf:
	Inherits: ^Infantry
	DamageMultiplier@iar1:
		RequiresCondition: iar1 && !iar2
		Modifier: 96
	DamageMultiplier@iar2:
		RequiresCondition: iar2 && !iar3
		Modifier: 92
	DamageMultiplier@iar3:
		RequiresCondition: iar3
		Modifier: 88
	FirepowerMultiplier@ifp1:
		RequiresCondition: ifp1 && !ifp2
		Modifier: 104
	FirepowerMultiplier@ifp2:
		RequiresCondition: ifp2 && !ifp3
		Modifier: 108
	FirepowerMultiplier@ifp3:
		RequiresCondition: ifp3
		Modifier: 112
	ShakeOnDeath:
		Duration: 15
	ChangesHealth@aeiouboost:
		RequiresCondition: aeiouboost
		PercentageStep: 1
		Delay: 75
		StartIfBelow: 70
		DamageCooldown: 100
	GpsDot:
		String: Biohazard
	Cloneable:
		Types: Epic
	Targetable@epic1:
		TargetTypes: EpicUnit

# Reduces upgrade effectiveness for any epic vehicle
^EpicVehicle:
	Inherits: ^Vehicle
	DamageMultiplier@var1:
		RequiresCondition: var1 && !var2
		Modifier: 96
	DamageMultiplier@var2:
		RequiresCondition: var2 && !var3
		Modifier: 92
	DamageMultiplier@var3:
		RequiresCondition: var3
		Modifier: 88
	FirepowerMultiplier@vfp1:
		RequiresCondition: vfp1 && !vfp2
		Modifier: 104
	FirepowerMultiplier@vfp2:
		RequiresCondition: vfp2 && !vfp3
		Modifier: 108
	FirepowerMultiplier@vfp3:
		RequiresCondition: vfp3
		Modifier: 112
	ShakeOnDeath:
		Duration: 15
	DamageMultiplier@IRONCURTAIN:
		RequiresCondition: invulnerability
		Modifier: 25
	ChangesHealth@aeiouboost:
		RequiresCondition: aeiouboost
		PercentageStep: 1
		Delay: 150
		StartIfBelow: 70
		DamageCooldown: 100
	GpsDot:
		String: Biohazard
	Cloneable:
		Types: Epic
	Targetable@epic1:
		TargetTypes: EpicUnit

^EpicShip:
	Inherits: ^Ship
	DamageMultiplier@nar1:
		RequiresCondition: nar1 && !nar2
		Modifier: 96
	DamageMultiplier@nar2:
		RequiresCondition: nar2 && !nar3
		Modifier: 92
	DamageMultiplier@nar3:
		RequiresCondition: nar3
		Modifier: 88
	FirepowerMultiplier@nfp1:
		RequiresCondition: nfp1 && !nfp2
		Modifier: 104
	FirepowerMultiplier@nfp2:
		RequiresCondition: nfp2 && !nfp3
		Modifier: 108
	FirepowerMultiplier@nfp3:
		RequiresCondition: nfp3
		Modifier: 112
	ShakeOnDeath:
		Duration: 15
	DamageMultiplier@IRONCURTAIN:
		RequiresCondition: invulnerability
		Modifier: 25
	GpsDot:
		String: Biohazard
	Cloneable:
		Types: Epic
	Targetable@epic1:
		TargetTypes: EpicUnit

# For select infantry that are also mechanical
^TargetRepairable:
	Targetable@REPAIR:
		RequiresCondition: !parachute && damaged
		TargetTypes: Repair
	GrantConditionOnDamageState@DAMAGED:
		Condition: damaged
		ValidDamageStates: Light, Medium, Heavy, Critical

# Default actor for Civilian faction built roads
^Road:
	Inherits@1: ^ExistsInWorld
	Inherits@2: ^SpriteActor
	Inherits@corrode: ^CorrodesFromTibWeaps
	Inherits@shape: ^1x1Shape
	Interactable:
		Bounds: 1024, 1024
	OwnerLostAction:
		Action: ChangeOwner
	Building:
		Footprint: =
		Dimensions: 1,1
		BuildSounds: placbldg.aud
		TerrainTypes: Clear,ClearSnow,Road
		UndeploySounds: cashturn.aud
		#RequiresCondition: !deployed
		#RequiresBaseProvider: False
	Buildable:
		Queue: Wall
		BuildPaletteOrder: 501
		Prerequisites: ~techlevel.infonly, ~structures.civ
		BuildDuration: 10
		Description: meta-road.description
	RequiresBuildableArea: # switch to this for civ buildings rather than base provider?
		AreaTypes: building
		Adjacent: 8
	#GivesBuildableArea:
	#	AreaTypes: building, fake
	BaseProvider:
		Range: 4c0
	#SelectionDecorations:
	#Selectable:
	#	Priority: 3
	FootprintPlaceBuildingPreview:
	#ChangesTerrain:
	#	TerrainType: Road
	#Immobile:
	#	OccupiesSpace: true
	LineBuild:
		Range: 8
		NodeTypes: road
	LineBuildNode:
		Types: road
	Valued:
		Cost: 100
	CustomSellValue:
		Value: 0
	Tooltip:
		Name: meta-road.name
	Health:
		HP: 100000
		NotifyAppliedDamage: false
	Armor:
		Type: Concrete
	Targetable:
		TargetTypes: GroundActor, CivRepair
		RequiresForceFire: true
	-GivesExperience:
	ProximityCaptor:
		Types: Road
	Sellable:
		SellSounds: cashturn.aud
	Guardable:
	WithSpriteBody:
	FrozenUnderFog:
	FrozenUnderFogUpdatedByGps:
	RenderSprites:
		Palette: noplayer
	RadarColorFromTerrain:
		Terrain: Road
	AppearsOnMapPreview:
		Terrain: Road
	MapEditorData:
		Categories: Wall
	#KillsSelf:
	#GrantConditionOnDeploy:
	#	DeployedCondition: deployed
	#	UndeployedCondition: undeployed
	#	AllowedTerrainTypes: Clear, ClearSnow, Road, Rough
	#	DeploySounds: placbldg.aud
	#	UndeploySounds: ramenu1.aud
	#WithIdleOverlay:
	#	Sequence: conwork
	#	RequiresCondition: undeployed

# Inherited and changed from mods/ra to change the palette, to allow player-coloured walls that inherit from this actor.
# Also changed allowed terrain type for Zerg Creep
^Wall:
	RenderSprites:
		Palette: noplayer
	Building:
		TerrainTypes: Clear,ClearSnow,Road,Creep
		AllowPlacementOnResources: true
	Targetable:
		TargetTypes: GroundActor, DetonateAttack, Wall

# Inherited and changed from mods/ra for new target type Cyborg and auto-attack walls (AI)
^AutoTargetGround:
	AutoTargetPriority@DEFAULT:
		ValidTargets: Infantry, Cyborg, Vehicle, Water, Ship, Underwater, Defense, Mine
	AutoTargetPriority@ATTACKANYTHING:
		ValidTargets: Infantry, Cyborg, Vehicle, Water, Ship, Underwater, Structure, Defense, Mine, Wall

^AutoTargetAll:
	AutoTargetPriority@DEFAULT:
		ValidTargets: Infantry, Cyborg, Vehicle, Water, Ship, Underwater, AirborneActor, Defense, Mine
	AutoTargetPriority@ATTACKANYTHING:
		ValidTargets: Infantry, Cyborg, Vehicle, Water, Ship, Underwater, AirborneActor, Structure, Defense, Mine, Wall

^AutoTargetAirAssaultMove:
	Inherits: ^AutoTargetAir
	AutoTargetPriority@DEFAULT:
		RequiresCondition: !stance-attackanything && !assault-move
	AutoTargetPriority@ATTACKANYTHING:
		RequiresCondition: stance-attackanything || assault-move
	AttackMove:
		AssaultMoveCondition: assault-move

# Inherited and changed from mods/ra to increase lifetime and allowed terrain types
^Husk:
	Inherits: ^BasicHusk
	WithIdleOverlay@Burns:
		Image: fire
		Sequence: 1
		IsDecoration: True
		Palette: effect
	ChangesHealth:
		Step: -125
		StartIfBelow: 101
		Delay: 8
	Husk:
		AllowedTerrain: Clear, ClearSnow, Rough, Road, Ore, Gems, Beach, Tiberium, BlueTiberium, Creep, Radiation
	WithColoredOverlay@IDISABLE:
		Color: 00000080

# Inherited and changed from mods/ra to add a toggle button for destructible bridges
^Bridge:
	GrantConditionOnPrerequisite:
		Prerequisites: explodebridges
		Condition: explodebridges
	Health:
		HP: 200000
	ChangesHealth:
		RequiresCondition: explodebridges
		StartIfBelow: 100
		PercentageStep: 100

# Inherited and changed from mods/ra to add a new voice set
^CivInfantry:
	Voiced:
		VoiceSet: ScientistVoice

# Inherited and changed from mods/ra to make fields destructible
^CivField:
	HitShape:
	Health:

# Upgrade from USA
^AdvancedTraining:
	GrantConditionOnPrerequisite@advancedtraining:
		Condition: advancedtraining
		Prerequisites: upgrade.usatraining
	GainsExperienceMultiplier@advancedtraining:
		RequiresCondition: advancedtraining
		Modifier: 150

# Buffs from the USA Strategy Center
^USAStrategyBuffs:
	ExternalCondition@usa.bombardment:
		Condition: usa.bombardment
	FirepowerMultiplier@usa.bombardment:
		RequiresCondition: usa.bombardment
		Modifier: 110
	WithDecoration@usa.bombardment:
		Image: pips
		Sequence: usastrategypipbombardment
		Palette: effect
		Position: TopLeft
		ValidRelationships: None,Neutral,Enemy,Ally
		RequiresCondition: usa.bombardment
	ExternalCondition@usa.hold_the_line:
		Condition: usa.hold_the_line
	DamageMultiplier@usa.hold_the_line:
		RequiresCondition: usa.hold_the_line
		Modifier: 90
	WithDecoration@usa.hold_the_line:
		Image: pips
		Sequence: usastrategypipholdtheline
		Palette: effect
		Position: TopLeft
		ValidRelationships: None,Neutral,Enemy,Ally
		RequiresCondition: usa.hold_the_line
	ExternalCondition@usa.search_and_destroy:
		Condition: usa.search_and_destroy
	RangeMultiplier@usa.search_and_destroy:
		RequiresCondition: usa.search_and_destroy
		Modifier: 110
	RevealsShroudMultiplier@usa.search_and_destroy:
		RequiresCondition: usa.search_and_destroy
		Modifier: 110
	WithDecoration@usa.search_and_destroy:
		Image: pips
		Sequence: usastrategypipsearchanddestroy
		Palette: effect
		Position: TopLeft
		ValidRelationships: None,Neutral,Enemy,Ally
		RequiresCondition: usa.search_and_destroy

# Used for non-Defense structures only
^USAHoldTheLine:
	ExternalCondition@usa.hold_the_line:
		Condition: usa.hold_the_line
	DamageMultiplier@usa.hold_the_line:
		RequiresCondition: usa.hold_the_line
		Modifier: 90
	WithDecoration@usa.hold_the_line:
		Image: pips
		Sequence: usastrategypipholdtheline
		Palette: effect
		Position: TopLeft
		ValidRelationships: None,Neutral,Enemy,Ally
		RequiresCondition: usa.hold_the_line

# Inherited and changed from mods/ra to adjust the colour
^DisableOnLowPower:
	WithColoredOverlay@IDISABLE:
		Color: 00000080

# Used on everything except normal buildings
^propagandaboost:
	ExternalCondition@propagandaboost:
		Condition: propaganda
	ChangesHealth@propagandaboost:
		Step: 0
		PercentageStep: 1
		Delay: 125
		StartBelow: 100
		DamageCooldown: 125
		RequiresCondition: propaganda
	ReloadDelayMultiplier@propagandaboost:
		RequiresCondition: propaganda
		Modifier: 90
	WithIdleOverlay@propagandaboost:
		Image: propagandaboost-overlay
		Sequence: vehicle
		Palette: effect
		RequiresCondition: propaganda
		IsDecoration: True
	ExternalCondition@propagandaboostupgrade:
		Condition: propagandaupgrade
	ChangesHealth@propagandaboostupgrade:
		Step: 0
		PercentageStep: 2
		Delay: 125
		StartBelow: 100
		DamageCooldown: 125
		RequiresCondition: propagandaupgrade
	ReloadDelayMultiplier@propagandaboostupgrade:
		RequiresCondition: propagandaupgrade
		Modifier: 80
	WithIdleOverlay@propagandaboostupgrade:
		Image: propagandaboost-overlay
		Sequence: vehicleupgrade1
		Palette: effect
		RequiresCondition: propagandaupgrade
		IsDecoration: True
	ExternalCondition@JapanBerserkerPower:
		Condition: JapanBerserkerCondition
	Berserkable@JapanBerserkerPower:
		RequiresCondition: JapanBerserkerCondition
	WithColoredOverlay@JapanBerserkerPower:
		RequiresCondition: JapanBerserkerCondition
		Color: ff000040
	WithIdleOverlay@JapanBerserkerPower:
		Image: berserk-overlay
		Sequence: berserk-vehicle
		Palette: effect
		RequiresCondition: JapanBerserkerCondition
		IsDecoration: True
	DamageMultiplier@JapanBerserkerPower:
		Modifier: 75
		RequiresCondition: JapanBerserkerCondition
	ReloadDelayMultiplier@JapanBerserkerPower:
		Modifier: 120
		RequiresCondition: JapanBerserkerCondition
	RejectsOrders@JapanBerserkerPower:
		RequiresCondition: JapanBerserkerCondition

# Used only on infantry - consolidate with japan buffs?
^propagandaboostinfantry:
	Inherits: ^propagandaboost
	WithIdleOverlay@propagandaboost:
		Sequence: infantry
	WithIdleOverlay@propagandaboostupgrade:
		Sequence: infantryupgrade1
	ExternalCondition@basemedkits:
		Condition: basemedkits
	ChangesHealth@basemedkits:
		Step: 0
		PercentageStep: 10
		Delay: 125
		StartBelow: 100
		DamageCooldown: 125
		RequiresCondition: basemedkits
	WithDecoration@basemedkits:
		Image: pips
		Sequence: pip-heal
		Palette: effect
		Position: TopRight
		ValidRelationships: None,Neutral,Enemy,Ally
		RequiresCondition: basemedkits
	ExternalCondition@JapanBerserkerPower:
		Condition: JapanBerserkerCondition
	Berserkable@JapanBerserkerPower:
		RequiresCondition: JapanBerserkerCondition
	WithColoredOverlay@JapanBerserkerPower:
		RequiresCondition: JapanBerserkerCondition
		Color: ff000040
	WithIdleOverlay@JapanBerserkerPower:
		Image: berserk-overlay
		Sequence: berserk-infantry
		Palette: effect
		RequiresCondition: JapanBerserkerCondition
		IsDecoration: True
	DamageMultiplier@JapanBerserkerPower:
		Modifier: 75
		RequiresCondition: JapanBerserkerCondition
	ReloadDelayMultiplier@JapanBerserkerPower:
		Modifier: 120
		RequiresCondition: JapanBerserkerCondition
	RejectsOrders@JapanBerserkerPower:
		RequiresCondition: JapanBerserkerCondition

# Used only on infantry - consolidate with propaganda boost?
^japanbuffs_infantry:
	ExternalCondition@commandobonus:
		Condition: commandobonus
	DamageMultiplier@commandobonus:
		RequiresCondition: commandobonus
		Modifier: 75
	WithIdleOverlay@commandobonus:
		Image: commandobonus-overlay
		Sequence: infantry
		Palette: effect
		RequiresCondition: commandobonus
		IsDecoration: True
	ExternalCondition@onmyodomark:
		Condition: onmyodomark
	WithColoredOverlay@onmyodomark:
		Color: ffffff50
		RequiresCondition: onmyodomark
	Explodes@onmyodomark:
		Weapon: japanonmyodomarkexplode
		EmptyWeapon: japanonmyodomarkexplode
		RequiresCondition: onmyodomark
		DamageSource: Killer

# Used on vehicles, ships and defense structures
^japanbuffs_buildings:
	ExternalCondition@komatsubuff:
		Condition: komatsubuff
	RangeMultiplier@komatsubuff:
		Modifier: 125
		RequiresCondition: komatsubuff
	ReloadDelayMultiplier@komatsubuff:
		Modifier: 80
		RequiresCondition: komatsubuff
	WithColoredOverlay@komatsubuff:
		Color: 00fbff50
		RequiresCondition: komatsubuff
	ExternalCondition@shishironbuff:
		Condition: shishironbuff
	SpeedMultiplier@shishironbuff:
		Modifier: 140
		RequiresCondition: shishironbuff
	WithColoredOverlay@shishironbuff:
		Color: 00ff8050
		RequiresCondition: shishironbuff

# Used on buildings to receive a resource value multiplier (should be only on Refinery type buildings, not the default ^Building actor - todo)
^japanbuffs_refinery:
	ExternalCondition@shishironbuff:
		Condition: shishironbuff
	ResourceValueMultiplier@shishironbuff:
		Modifier: 125
		RequiresCondition: shishironbuff

# Used for units that can receive Patriot/Frenzy boost, Japan Curse as well as:
# Defense Matrix from Terran Science Vessel or Protoss (Artanis) support power
# AI check to use any of the above support powers
# Cryostream speed debuff
^FrenzyBoost:
	ExternalCondition@patriotismboost:
		Condition: patriotismboost
	ExternalCondition@frenzyboost:
		Condition: frenzyboost
	DamageMultiplier@frenzyboost:
		RequiresCondition: frenzyboost || patriotismboost
		Modifier: 80
	FirepowerMultiplier@frenzyboost:
		RequiresCondition: frenzyboost || patriotismboost
		Modifier: 120
	ReloadDelayMultiplier@frenzyboost:
		RequiresCondition: frenzyboost || patriotismboost
		Modifier: 80
	RangeMultiplier@frenzyboost:
		RequiresCondition: frenzyboost || patriotismboost
		Modifier: 110
	SpeedMultiplier@frenzyboost:
		RequiresCondition: frenzyboost || patriotismboost
		Modifier: 120
	TimedConditionBar@frenzyboost:
		Color: FFFF00
		Condition: frenzyboost
	WithColoredOverlay@frenzyboost:
		RequiresCondition: frenzyboost
		Color: FFFF0050
	TimedConditionBar@patriotismboost:
		Color: 00FFFF
		Condition: patriotismboost
	WithIdleOverlay@patriotismboost:
		Image: patriotism-overlay
		Sequence: vehicle
		Palette: effect
		RequiresCondition: patriotismboost
		IsDecoration: True
	ExternalCondition@defmatrix:
		Condition: defense_matrix
	WithIdleOverlay@defmatrix1:
		Image: tdefense
		Sequence: front
		Palette: effect
		RequiresCondition: defense_matrix_up
		IsDecoration: True
	WithIdleOverlay@defmatrix2:
		Image: tdefense
		Sequence: back
		Palette: effect
		RequiresCondition: defense_matrix_up
		IsDecoration: True
	DamageMultiplier@defmatrix:
		RequiresCondition: defense_matrix_up
		Modifier: 60
	Targetable@defmatrix:
		RequiresCondition: defense_matrix
		TargetTypes: DefenseMatrix
	Shielded@defmatrix:
		MaxStrength: -1
		RegenAmount: 1
		RegenInterval: 500000
		RegenDelay: 500000
		SelectionBarColor: FFFFFF
		ShieldsUpCondition: defense_matrix_up
		ShieldsDamagedCondition: damaged_shield
		BypassDamageTypes: BypassShield
		OverrideDamageType: BypassedShield
		RequiresCondition: defense_matrix
		RemoveOnDisable: false
	TimedConditionBar@defmatrix:
		Color: CCFFFF
		Condition: defense_matrix
	GrantConditionOnAttack@ai_consideration:
		Condition: frenziable
		RevokeDelay: 100
	Targetable@ai_consideration:
		RequiresCondition: frenziable
		TargetTypes: FrenzyMe
	ExternalCondition@JapanCurseCondition:
		Condition: JapanCurseCondition
	FirepowerMultiplier@JapanCurseCondition:
		RequiresCondition: JapanCurseCondition
		Modifier: 50
	WithIdleOverlay@JapanCurseCondition:
		Image: japancurse-overlay
		Sequence: vehicle
		Palette: effect
		RequiresCondition: JapanCurseCondition
		IsDecoration: True
	ExternalCondition@cyrostream:
		Condition: cyrostreameffect
	SpeedMultiplier@cyrostream:
		RequiresCondition: cyrostreameffect >= 8
		Modifier: 50
	WithColoredOverlay@cyrostream:
		RequiresCondition: cyrostreameffect >= 8
		Color: 00fbff40
	WithColoredOverlay@cyrostream@2:
		RequiresCondition: (cyrostreameffect >= 1) && (cyrostreameffect < 8)
		Color: 00FBFF11
	ExternalCondition@cyrostrike:
		Condition: cyrostrikeeffect
	SpeedMultiplier@cyrostrike:
		RequiresCondition: cyrostrikeeffect
		Modifier: 50
	ReloadDelayMultiplier@cyrostrike:
		RequiresCondition: cyrostrikeeffect
		Modifier: 150
	WithColoredOverlay@cyrostrike:
		RequiresCondition: cyrostrikeeffect
		Color: 00fbff40
	GrantConditionOnTerrain@creep:
		Condition: oncreep
		TerrainTypes: Creep
	SpeedMultiplier@creep:
		Modifier: 150
		RequiresCondition: oncreep && zagara_active
	GrantConditionOnPrerequisite@zagara:
		Condition: zagara_active
		Prerequisites: active.zagara

^FrenzyBoostInfantry:
	Inherits: ^FrenzyBoost
	WithIdleOverlay@patriotismboost:
		Sequence: infantry
	WithIdleOverlay@JapanCurseCondition:
		Image: japancurse-overlay
		Sequence: infantry
		Palette: effect
		RequiresCondition: JapanCurseCondition
		IsDecoration: True
	SpeedMultiplier@cyrostream:
		RequiresCondition: cyrostreameffect >= 5
		Modifier: 50
	WithColoredOverlay@cyrostream:
		RequiresCondition: cyrostreameffect >= 5
		Color: 00fbff40

# Inherited and changed from mods/ra to increase lifetime and allowed terrain types
^Crate:
	Crate:
		Duration: 6000
		TerrainTypes: Clear, ClearSnow, Creep, Rough, Road, Ore, Beach, Water, Gems, Tiberium, BlueTiberium

# Inherited and changed from mods/ra to unitise effects of officers and other passengers that buff the container.
# e1of = orange cross, officer squad boost, boosts movement speed and attack speed (infantry only)
# tscv = blue cross, container gains self repair
# medic = red cross, container gains infantry heal radius
^CargoPips:
	Cargo:
		Types: Infantry, Arcanewizard, FireWizard, LightningWizard
		PassengerConditions:
			e1of: e1of
			dm2of: e1of
			avinf3: e1of
			frge1of: e1of
			tscv: tscv
			mech: tscv
			e6: tscv
			frge6: tscv
			fmech: tscv
			fe6: tscv
			mech.dm: tscv
			frgsurv: tscv
			tsengi.o: tscv
			tmedic: medic
			medi: medic
			medi.dm: medic
			fmedi: medic
			japanbioengineer: medic
			priest: medic
			acolyte: medic
	ProximityExternalCondition@officer:
		RequiresCondition: e1of
		Condition: squadboost
		Range: 5c0
	WithDecoration@officer2:
		Image: pips
		Sequence: pip-bonus
		Palette: effect
		Position: TopRight
		ValidRelationships: None,Neutral,Enemy,Ally
		RequiresCondition: !demoralise && e1of
	ExternalCondition@demoralise:
		Condition: demoralise
	ChangesHealth@scv:
		Step: 500
		StartIfBelow: 100
		Delay: 50
		RequiresCondition: tscv
		DamageCooldown: 125
	DamageMultiplier@scv:
		Modifier: 90
		RequiresCondition: tscv
	ProximityExternalCondition@hospital:
		RequiresCondition: medic
		Condition: hospital
		Range: 5c0
	WithDecoration@hospital:
		Image: pips
		Sequence: pip-heal
		Palette: effect
		Position: TopRight
		Margin: 0,8
		ValidRelationships: None,Neutral,Enemy,Ally
		RequiresCondition: medic
	WithDecoration@scv:
		Image: pips
		Sequence: pip-aeiou
		Palette: effect
		Position: TopRight
		Margin: 8,0
		ValidRelationships: None,Neutral,Enemy,Ally
		RequiresCondition: tscv


^AutoTargetInfantryPriority:
	AutoTargetPriority@Infantry:
		ValidTargets: Infantry
		Priority: 2
	AutoTargetPriority@Vehicle:
		ValidTargets: Vehicle
		Priority: 1

^AutoTargetVehiclePriority:
	AutoTargetPriority@Infantry:
		ValidTargets: Infantry
		Priority: 2
	AutoTargetPriority@Vehicle:
		ValidTargets: Vehicle
		Priority: 1

# Default actor type for Blossom trees and monoliths
^TibTree:
	Inherits@1: ^SpriteActor
	Interactable:
	HitShape:
	Tooltip:
		Name: meta-tibtree-name
		ShowOwnerRow: false
	RenderSprites:
		Palette: dawn
	WithSpriteBody:
	Immobile:
		OccupiesSpace: false
	AppearsOnRadar:
	RadarColorFromTerrain:
		Terrain: Tiberium
	AppearsOnMapPreview:
		Terrain: Tiberium
	HiddenUnderShroud:
	WithMakeAnimation:
		Condition: build-incomplete
	MapEditorData:
		Categories: Resource spawn
	RequiresSpecificOwners:
		ValidOwnerNames: Neutral
	ExternalCondition@creep:
		Condition: creepgen
	ExplodeWeapon@1:
		RequiresCondition: creepgen
		Weapon: CreepPreventer
	Targetable@tree:
		TargetTypes: TibTree, Ground, UpgradeThing, Ground, OreMine, NoAITarget, NoAutoTarget
	KillsSelf@notib:
		RequiresCondition: notib
	FreeActor@notib:
		RequiresCondition: notib
		Actor: MINE
	GrantConditionOnPrerequisite@notib:
		Prerequisites: techlevel.tibremove
		Condition: notib
	ProximityExternalCondition@forgotten:
		Condition: tree_forgotten_aura
		Range: 12c0
		ValidRelationships: Ally, Enemy, Neutral, None
	HiddenUnderShroud:
		AlwaysVisibleRelationships: Ally, Enemy, Neutral
		Type: CenterPosition


# Inherited and changed from mods/ra so that the tree can be removed with an external condition, and targeted as a normal GroundActor
^Tree:
	ExternalCondition@remove:
		Condition: remove_tree
	KillsSelf@remove:
		RequiresCondition: remove_tree
		Delay: 5
	Targetable:
		TargetTypes: Trees, GroundActor

# Inherited and changed from mods/ra so that trees can be 100% destroyed.
^TreeHusk:
	Inherits@shape: ^1x1Shape
	Health:
		HP: 50000
	Armor:
		Type: Tree
	Targetable:
		TargetTypes: Trees, GroundActor
	ExternalCondition@remove:
		Condition: remove_tree
	KillsSelf@remove:
		RequiresCondition: remove_tree
		RemoveInstead: true
		Delay: 100

# Default actor type for all the tree actor types that can be infected by tiberium
^InfectableTree:
	Health:
		HP: 100000
	Building:
		TerrainTypes: Clear,ClearSnow,Road
		BuildSounds: hvydoor1.aud
	Buildable:
		Queue: Wall
		Prerequisites: ~disabled
		BuildPaletteOrder: 90000
		Icon: idle
	ActorPreviewPlaceBuildingPreview:
	Tooltip:
		RequiresCondition: !tibtree || notib
	Tooltip@infected:
		RequiresCondition: tibtree && !notib
		Name: meta-infectabletree-infected--name
	Targetable@infectable:
		RequiresCondition: infectable
		TargetTypes: OreMine
	GrantRandomCondition@tibtree:
		Conditions: tibtree,none,none,none,none,none,none,none,none,none,none,none,none,none,none,none,none,none,none,none,none,none,none,none,none,none,none,none,none,none,none,none,none,none,none,none,none,none,none,none,none
	GrantRandomCondition@infectable:
		Conditions: infectable,lessinfectable,moreinfectable
	ExternalCondition@growth:
		Condition: growth
	ExternalCondition@dotransform:
		Condition: dotransform
	GrantPeriodicCondition@aaa:
		RequiresCondition: (lessinfectable && (growth > 95)) || (infectable && (growth > 70)) || (moreinfectable && (growth > 45)) || tibtree && !notib
		Condition: dotransform
		CooldownDuration: 1500, 4500
		ActiveDuration: 50
	AmbientSound:
		RequiresCondition: (lessinfectable && (growth > 95)) || (infectable && (growth > 70)) || (moreinfectable && (growth > 45)) || tibtree && !notib
		SoundFiles: ambtibe2.wav
		Delay: 250, 3000
		Interval: 1500, 3000
	FreeActor@1:
		RequiresCondition: dotransform
		Actor: split3.cr
		SpawnOffset: 1,0
	KillsSelf:
		RequiresCondition: dotransform
		RemoveInstead: true
		Delay: 2
	ExternalCondition@tibtree:
		Condition: tibtree
	ProximityExternalCondition@tree:
		RequiresCondition: infectable || moreinfectable && !notib
		Condition: near_tree
		Range: 2c0
	GrantConditionOnPrerequisite@notib:
		Prerequisites: techlevel.tibremove
		Condition: notib
	DamageMultiplier:
		RequiresCondition: (lessinfectable && (growth > 95)) || (infectable && (growth > 70)) || (moreinfectable && (growth > 45)) || tibtree && !notib
		Modifier: 0

# Give this to units that should not be 100% mind controlled, and instead only temporary
^MindControlResistant:
	Targetable@mcresist:
		TargetTypes: HighValueMindControl
	ExternalCondition@mind:
		Condition: mindcontrolresist
	DamageMultiplier@mind:
		RequiresCondition: mindcontrolresist
		Modifier: 25
	FirepowerMultiplier@mind:
		RequiresCondition: mindcontrolresist
		Modifier: 50
	Targetable@mcresist2:
		RequiresCondition: mindcontrolresist
		TargetTypes: NoAutoTarget

^MediConditionsplus:
	### Bless Condition heals units and grants damage resistance
	ExternalCondition@Mediblesscondition:
		Condition: MediBlessCondition
	###Monumnet heals, buffs defense, attack speed and damage done
	ExternalCondition@MonumentBoost:
		Condition: MonumentBoost
	###Monumnet heals, buffs defense, attack speed and damage done, wagon version gives faster move speed too
	ExternalCondition@MonumentWagonBoost:
		Condition: MonumentWagonBoost
	##Weaker Monumnet heal from paladin
	ExternalCondition@PallyBoost:
		Condition: PallyBoost
	###Generates shields on Wizards and buffs stats
	ExternalCondition@ArchmageAura:
		Condition: ArchmageAura
	###Heal over time condition from martyr
	ExternalCondition@martyhot:
		Condition: martyhot
	##Non Magic units get bonus Vehicle Damage
	GrantConditionOnPrerequisite@medimagicwep:
		Prerequisites: upgrade.medimagicwep
		Condition: medimagicwep
	##Buildings get shields, very small regen
	GrantConditionOnPrerequisite@medimagiclogs:
		Prerequisites: upgrade.medimagiclogs
		Condition: medimagiclogs
	##units can see stealth from longer
	GrantConditionOnPrerequisite@mediblessed:
		Prerequisites: upgrade.medibless
		Condition: mediblessed
	##units get imunity to debuffs when neer paladin or monuments
	GrantConditionOnPrerequisite@medishield:
		Prerequisites: upgrade.medishield
		Condition: medishield
	
^MediConditionsnegative:
	###blank
	ExternalCondition@thisdoesnothing:
		Condition: thisdoesnothing
	###Too many stacks will Stun the unit
	ExternalCondition@zapstacks:
		Condition: zapstack
	###Curse Debuff, reduce damage done and damage taken up
	ExternalCondition@MediCurseCondition:
		Condition: MediCurseCondition
	###Corrodes, and slows
	ExternalCondition@RotElementHitCon:
		Condition: RotElementHitCon
	###Slows movement and attack speed
	ExternalCondition@WaterElementHit:
		Condition: WaterElementHit
	### % DoT and slows
	ExternalCondition@DarkWiz:
		Condition: DarkWiz
	###Prevents movement, lower range
	ExternalCondition@ChainsofGod:
		Condition: ChainsofGod
	###Corrodes and drains HP
	ExternalCondition@DarkKnightAuraHostile:
		Condition: DarkKnightAuraHostile
	###Drains shields over time
	ExternalCondition@ArchamageAntiShield:
		Condition: ArchamageAntiShield

##Infantry
^MediConditionsI:
	Inherits: ^MediConditionsnegative
	Inherits: ^MediConditionsplus
	### Bless Condition heals units and grants damage resistance
	FirepowerMultiplier@MediblessconditionF:
		RequiresCondition: MediBlessCondition
		Modifier: 120
	SpeedMultiplier@MediblessconditionS:
		RequiresCondition: MediBlessCondition
		Modifier: 130
	DamageMultiplier@MediblessconditionD:
		RequiresCondition: MediBlessCondition
		Modifier: 90
	ChangesHealth@MediBlessCondition:
		Step: 250
		Delay: 15
		StartIfBelow: 101
		RequiresCondition: MediBlessCondition
		DamageTypes: BypassShield
	WithIdleOverlay@Mediblesscondition:
		Image: japancurse-overlay
		Sequence: vehicle
		Palette: effect
		RequiresCondition: MediBlessCondition
		IsDecoration: True
	###Monumnet heals, buffs defense, attack speed and damage done
	DamageMultiplier@MonumentBoostD:
		RequiresCondition: MonumentBoost
		Modifier: 90
	FirepowerMultiplier@MonumentBoostF:
		RequiresCondition: MonumentBoost
		Modifier: 120
	ChangesHealth@MonumentBoost:
		Step: 250
		Delay: 50
		StartIfBelow: 101
		RequiresCondition: MonumentBoost
		DamageTypes: BypassShield
	WithIdleOverlay@MonumentBoost:
		Image: japancurse-overlay
		Sequence: vehicle
		Palette: effect
		RequiresCondition: MonumentBoost
		IsDecoration: True
	###Monumnet heals, buffs defense, attack speed and damage done, wagon version gives faster move speed too
	FirepowerMultiplier@MonumentWagonBoostF:
		RequiresCondition: MonumentWagonBoost
		Modifier: 125
	SpeedMultiplier@MonumentWagonBoostS:
		RequiresCondition: MonumentWagonBoost
		Modifier: 130
	DamageMultiplier@MonumentWagonBoostD:
		RequiresCondition: MonumentWagonBoost
		Modifier: 85
	RangeMultiplier@MonumentWagonBoostR:
		RequiresCondition: MonumentWagonBoost
		Modifier: 120
	ChangesHealth@MonumentWagonBoost:
		Step: 300
		Delay: 50
		StartIfBelow: 101
		RequiresCondition: MonumentWagonBoost
		DamageTypes: BypassShield
	WithIdleOverlay@MonumentWagonBoost:
		Image: japancurse-overlay
		Sequence: vehicle
		Palette: effect
		RequiresCondition: MonumentWagonBoost
		IsDecoration: True
	###Heal over time condition from martyr
	ChangesHealth@martyhot:
		Step: 600
		Delay: 15
		StartIfBelow: 101
		RequiresCondition: martyhot
		DamageTypes: BypassShield
	###Curse Debuff, reduce damage done and damage taken up
	FirepowerMultiplier@MediCurseConditionF:
		RequiresCondition: MediCurseCondition
		Modifier: 70
	SpeedMultiplier@MediCurseConditionS:
		RequiresCondition: MediCurseCondition
		Modifier: 95
	DamageMultiplier@MediCurseConditionD:
		RequiresCondition: MediCurseCondition
		Modifier: 110
	RangeMultiplier@MediCurseConditionR:
		RequiresCondition: MediCurseCondition
		Modifier: 90
	###Corrodes, and slows
	GrantCondition@RotElementHitCon: 
		Condition: corrode
		RequiresCondition: RotElementHitCon
	SpeedMultiplier@RotElementHitConS:
		RequiresCondition: RotElementHitCon
		Modifier: 95
	###Slows movement and attack speed
	SpeedMultiplier@WaterElementHitS:
		RequiresCondition: WaterElementHit
		Modifier: 90
	ReloadDelayMultiplier@WaterElementHitR:
		RequiresCondition: WaterElementHit
		Modifier: 115
	### % DoT and slows
	ChangesHealth@DarkWiz:
		PercentageStep: -1
		Delay: 20
		StartIfBelow: 101
		RequiresCondition: DarkWiz
		DamageTypes: BypassShield
	###Prevents movement, lower range
	SpeedMultiplier@ChainsofGodS:
		RequiresCondition: ChainsofGod
		Modifier: 5
	RangeMultiplier@ChainsofGodR:
		RequiresCondition: ChainsofGod
		Modifier: 70
	###Corrodes and drains HP
	GrantCondition@DarkKnightAuraHostile: 
		Condition: corrode
		RequiresCondition: DarkKnightAuraHostile
	SpeedMultiplier@DarkKnightAuraHostileS:
		RequiresCondition: DarkKnightAuraHostile
		Modifier: 95
	ChangesHealth@DarkKnightAuraHostile:
		PercentageStep: -1
		Delay: 100
		StartIfBelow: 101
		RequiresCondition: DarkKnightAuraHostile
		DamageTypes: BypassShield
	###Drains shields over time
	ChangesHealth@ArchamageAntiShield:
		PercentageStep: -1
		Delay: 1
		StartIfBelow: 101
		RequiresCondition: ArchamageAntiShield && shielded
	##Non Magic units get bonus Vehicle Damage
	GrantConditionOnPrerequisite@medimagicwep:
		Prerequisites: upgrade.medimagicwep
		Condition: medimagicwep
	##units can see stealth from longer
	DetectCloakedMultiplier@mediblessed:
		Modifier: 150
		Condition: mediblessed
	##units get imunity to debuffs when neer paladin or monuments
	GrantConditionOnPrerequisite@medishield:
		Prerequisites: upgrade.medishield
		Condition: medishieldreq
	GrantCondition@medishield:
		Condition: medishield
		RequiresCondition: medishieldreq && MonumentBoost
	GrantCondition@medishield2:
		Condition: medishield
		RequiresCondition: medishieldreq && MonumentWagonBoost
	GrantCondition@medishield3:
		Condition: medishield
		RequiresCondition: medishieldreq && PallyBoost
	##Pally heals, buffs defense and damage done
	DamageMultiplier@PallyBoostD:
		RequiresCondition: PallyBoost
		Modifier: 95
	FirepowerMultiplier@PallyBoostF:
		RequiresCondition: PallyBoost
		Modifier: 115
	ChangesHealth@PallyBoost:
		Step: 150
		Delay: 50
		StartIfBelow: 101
		RequiresCondition: PallyBoost
		DamageTypes: BypassShield
	WithIdleOverlay@PallyBoost:
		Image: japancurse-overlay
		Sequence: vehicle
		Palette: effect
		RequiresCondition: PallyBoost
		IsDecoration: True



##Vehicles
^MediConditionsV:
	Inherits: ^MediConditionsnegative
	Inherits: ^MediConditionsplus
	### Bless Condition heals units and grants damage resistance
	FirepowerMultiplier@MediblessconditionF:
		RequiresCondition: MediBlessCondition
		Modifier: 120
	SpeedMultiplier@MediblessconditionS:
		RequiresCondition: MediBlessCondition
		Modifier: 130
	DamageMultiplier@MediblessconditionD:
		RequiresCondition: MediBlessCondition
		Modifier: 90
	ChangesHealth@MediBlessCondition:
		Step: 250
		Delay: 15
		StartIfBelow: 101
		RequiresCondition: MediBlessCondition
		DamageTypes: BypassShield
	WithIdleOverlay@Mediblesscondition:
		Image: japancurse-overlay
		Sequence: vehicle
		Palette: effect
		RequiresCondition: MediBlessCondition
		IsDecoration: True
	###Monumnet heals, buffs defense, attack speed and damage done
	DamageMultiplier@MonumentBoostD:
		RequiresCondition: MonumentBoost
		Modifier: 95
	FirepowerMultiplier@MonumentBoostF:
		RequiresCondition: MonumentBoost
		Modifier: 120
	ChangesHealth@MonumentBoost:
		Step: 250
		Delay: 50
		StartIfBelow: 101
		RequiresCondition: MonumentBoost
		DamageTypes: BypassShield
	WithIdleOverlay@MonumentBoost:
		Image: japancurse-overlay
		Sequence: vehicle
		Palette: effect
		RequiresCondition: MonumentBoost
		IsDecoration: True
	###Monumnet heals, buffs defense, attack speed and damage done, wagon version gives faster move speed too
	FirepowerMultiplier@MonumentWagonBoostF:
		RequiresCondition: MonumentWagonBoost
		Modifier: 125
	SpeedMultiplier@MonumentWagonBoostS:
		RequiresCondition: MonumentWagonBoost
		Modifier: 130
	DamageMultiplier@MonumentWagonBoostD:
		RequiresCondition: MonumentWagonBoost
		Modifier: 85
	RangeMultiplier@MonumentWagonBoostR:
		RequiresCondition: MonumentWagonBoost
		Modifier: 120
	ChangesHealth@MonumentWagonBoost:
		Step: 300
		Delay: 50
		StartIfBelow: 101
		RequiresCondition: MonumentWagonBoost
		DamageTypes: BypassShield
	WithIdleOverlay@MonumentWagonBoost:
		Image: japancurse-overlay
		Sequence: vehicle
		Palette: effect
		RequiresCondition: MonumentWagonBoost
		IsDecoration: True
	###Too many stacks will Stun the unit
	RangeMultiplier@zapstacksR:
		RequiresCondition: zapstack
		Modifier: 1
	SpeedMultiplier@zapstacksS:
		RequiresCondition: zapstack
		Modifier: 1
	###Curse Debuff, reduce damage done and damage taken up
	FirepowerMultiplier@MediCurseConditionF:
		RequiresCondition: MediCurseCondition
		Modifier: 70
	SpeedMultiplier@MediCurseConditionS:
		RequiresCondition: MediCurseCondition
		Modifier: 95
	DamageMultiplier@MediCurseConditionD:
		RequiresCondition: MediCurseCondition
		Modifier: 110
	RangeMultiplier@MediCurseConditionR:
		RequiresCondition: MediCurseCondition
		Modifier: 90
	###Corrodes, and slows
	GrantCondition@RotElementHitCon: 
		Condition: corrode
		RequiresCondition: RotElementHitCon
	SpeedMultiplier@RotElementHitConS:
		RequiresCondition: RotElementHitCon
		Modifier: 85
	###Slows movement and attack speed
	SpeedMultiplier@WaterElementHitS:
		RequiresCondition: WaterElementHit
		Modifier: 85
	ReloadDelayMultiplier@WaterElementHitR:
		RequiresCondition: WaterElementHit
		Modifier: 125
	### % DoT
	ChangesHealth@DarkWiz:
		PercentageStep: -1
		Delay: 10
		StartIfBelow: 101
		RequiresCondition: DarkWiz
		DamageTypes: BypassShield
	###Prevents movement, lower range
	SpeedMultiplier@ChainsofGodS:
		RequiresCondition: ChainsofGod
		Modifier: 5
	RangeMultiplier@ChainsofGodR:
		RequiresCondition: ChainsofGod
		Modifier: 70
	###Corrodes and drains HP
	GrantCondition@DarkKnightAuraHostile: 
		Condition: corrode
		RequiresCondition: DarkKnightAuraHostile
	SpeedMultiplier@DarkKnightAuraHostileS:
		RequiresCondition: DarkKnightAuraHostile
		Modifier: 95
	ChangesHealth@DarkKnightAuraHostile:
		PercentageStep: -1
		Delay: 100
		StartIfBelow: 101
		RequiresCondition: DarkKnightAuraHostile
		DamageTypes: BypassShield
	###Drains shields over time
	ChangesHealth@ArchamageAntiShield:
		PercentageStep: -1
		Delay: 1
		StartIfBelow: 101
		RequiresCondition: ArchamageAntiShield && shielded
	##Non Magic units get bonus Vehicle Damage
	GrantConditionOnPrerequisite@medimagicwep:
		Prerequisites: upgrade.medimagicwep
		Condition: medimagicwep
	##units can see stealth from longer
	DetectCloakedMultiplier@mediblessed:
		Modifier: 150
		Condition: mediblessed
	##units get imunity to debuffs when neer paladin or monuments
	GrantConditionOnPrerequisite@medishield:
		Prerequisites: upgrade.medishield
		Condition: medishieldreq
	GrantCondition@medishield:
		Condition: medishield
		RequiresCondition: medishieldreq && MonumentBoost
	GrantCondition@medishield2:
		Condition: medishield
		RequiresCondition: medishieldreq && MonumentWagonBoost
	GrantCondition@medishield3:
		Condition: medishield
		RequiresCondition: medishieldreq && PallyBoost
	##Pally heals, buffs defense and damage done
	DamageMultiplier@PallyBoostD:
		RequiresCondition: PallyBoost
		Modifier: 95
	FirepowerMultiplier@PallyBoostF:
		RequiresCondition: PallyBoost
		Modifier: 115
	ChangesHealth@PallyBoost:
		Step: 150
		Delay: 15
		StartIfBelow: 101
		RequiresCondition: PallyBoost
		DamageTypes: BypassShield
	WithIdleOverlay@PallyBoost:
		Image: japancurse-overlay
		Sequence: vehicle
		Palette: effect
		RequiresCondition: PallyBoost
		IsDecoration: True
	
##Buildings
^MediConditionsB:
	Inherits: ^MediConditionsnegative
	Inherits: ^MediConditionsplus
	### Bless Condition heals units and grants damage resistance
	DamageMultiplier@MediblessconditionD:
		RequiresCondition: MediBlessCondition
		Modifier: 90
	ChangesHealth@MediBlessCondition:
		Step: 250
		Delay: 15
		StartIfBelow: 101
		RequiresCondition: MediBlessCondition
		DamageTypes: BypassShield
	WithIdleOverlay@Mediblesscondition:
		Image: japancurse-overlay
		Sequence: vehicle
		Palette: effect
		RequiresCondition: MediBlessCondition
		IsDecoration: True
	###Monumnet heals, buffs defense, attack speed and damage done
	DamageMultiplier@MonumentBoostD:
		RequiresCondition: MonumentBoost
		Modifier: 95
	ChangesHealth@MonumentBoost:
		Step: 500
		Delay: 50
		StartIfBelow: 101
		RequiresCondition: MonumentBoost
		DamageTypes: BypassShield
	WithIdleOverlay@MonumentBoost:
		Image: japancurse-overlay
		Sequence: vehicle
		Palette: effect
		RequiresCondition: MonumentBoost
		IsDecoration: True
	###Monumnet heals, buffs defense, attack speed and damage done, wagon version gives faster move speed too
	DamageMultiplier@MonumentWagonBoostD:
		RequiresCondition: MonumentWagonBoost
		Modifier: 85
	ChangesHealth@MonumentWagonBoost:
		Step: 800
		Delay: 50
		StartIfBelow: 101
		RequiresCondition: MonumentWagonBoost
		DamageTypes: BypassShield
	WithIdleOverlay@MonumentWagonBoost:
		Image: japancurse-overlay
		Sequence: vehicle
		Palette: effect
		RequiresCondition: MonumentWagonBoost
		IsDecoration: True
	###Curse Debuff, reduce damage done and damage taken up
	DamageMultiplier@MediCurseConditionD:
		RequiresCondition: MediCurseCondition
		Modifier: 110
	###Corrodes, and slows
	GrantCondition@RotElementHitCon: 
		Condition: corrode
		RequiresCondition: RotElementHitCon
	### % DoT
	ChangesHealth@DarkWiz:
		PercentageStep: -1
		Delay: 10
		StartIfBelow: 101
		RequiresCondition: DarkWiz
		DamageTypes: BypassShield
	###Corrodes and drains HP
	GrantCondition@DarkKnightAuraHostile: 
		Condition: corrode
		RequiresCondition: DarkKnightAuraHostile
	###Drains shields over time
	ChangesHealth@ArchamageAntiShield:
		PercentageStep: -1
		Delay: 1
		StartIfBelow: 101
		RequiresCondition: ArchamageAntiShield && shielded
	##units can see stealth from longer
	DetectCloakedMultiplier@mediblessed:
		Modifier: 150
		Condition: mediblessed
	##units get imunity to debuffs when neer paladin or monuments
	GrantConditionOnPrerequisite@medishield:
		Prerequisites: upgrade.medishield
		Condition: medishieldreq
	GrantCondition@medishield:
		Condition: medishield
		RequiresCondition: medishieldreq && MonumentBoost
	GrantCondition@medishield2:
		Condition: medishield
		RequiresCondition: medishieldreq && MonumentWagonBoost
	GrantCondition@medishield3:
		Condition: medishield
		RequiresCondition: medishieldreq && PallyBoost
	##Buildings get shields, very small regen
	GrantConditionOnPrerequisite@medimagiclogs:
		Prerequisites: upgrade.medimagiclogs
		Condition: medimagiclogs
	GrantConditionOnPrerequisite@medimagiclogsshield:
		Prerequisites: upgrade.medimagiclogs
		Condition: external_shield
	

##Defenses
^MediConditionsD:
	Inherits: ^MediConditionsB
	##Non Magic units get bonus Vehicle Damage
	GrantConditionOnPrerequisite@medimagicwep:
		Prerequisites: upgrade.medimagicwep
		Condition: medimagicwep

